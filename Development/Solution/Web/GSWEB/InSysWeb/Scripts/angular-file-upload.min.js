!function(){var e=angular.module("angularFileUpload",[])
e.service("$upload",["$http","$q","$timeout",function(e,t,n){function i(i){i.method=i.method||"POST",i.headers=i.headers||{},i.transformRequest=i.transformRequest||function(t,n){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,n)}
var o=t.defer()
window.XMLHttpRequest.__isShim&&(i.headers.__setXHR_=function(){return function(e){e&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){o.notify(e)},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&o.notify(e)},!1))}}),e(i).then(function(e){o.resolve(e)},function(e){o.reject(e)},function(e){o.notify(e)})
var r=o.promise
return r.success=function(e){return r.then(function(t){e(t.data,t.status,t.headers,i)}),r},r.error=function(e){return r.then(null,function(t){e(t.data,t.status,t.headers,i)}),r},r.progress=function(e){return r.then(null,null,function(t){e(t)}),r},r.abort=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),r},r.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(r,arguments),e.apply(r,arguments)}}(i.xhrFn),r},r}this.upload=function(t){t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest||e.defaults.transformRequest
var n=new FormData,o=t.transformRequest,r=t.data
return t.transformRequest=function(e,n){if(r)if(t.formDataAppender)for(var i in r){var a=r[i]
t.formDataAppender(e,i,a)}else for(var i in r){var a=r[i]
if("function"==typeof o)a=o(a,n)
else for(var l=0;l<o.length;l++){var s=o[l]
"function"==typeof s&&(a=s(a,n))}e.append(i,a)}if(null!=t.file){var c=t.fileFormDataName||"file"
if("[object Array]"===Object.prototype.toString.call(t.file))for(var d="[object String]"===Object.prototype.toString.call(c),l=0;l<t.file.length;l++)e.append(d?c:c[l],t.file[l],t.fileName&&t.fileName[l]||t.file[l].name)
else e.append(c,t.file,t.fileName||t.file.name)}return e},t.data=n,i(t)},this.http=function(e){return i(e)}}]),e.directive("ngFileSelect",["$parse","$timeout",function(e,t){return function(n,i,o){var r=e(o.ngFileSelect),a=o.ngFileFilter
if("input"!==i[0].tagName.toLowerCase()||"file"!==(i.attr("type")&&i.attr("type").toLowerCase())){for(var l=angular.element('<input type="file">'),s=i[0].attributes,c=0;c<s.length;c++)"type"!==s[c].name.toLowerCase()&&l.attr(s[c].name,s[c].value)
o.multiple&&l.attr("multiple","true"),l.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden"),l.attr("__wrapper_for_parent_",!0),i.append(l),i[0].__file_click_fn_delegate_=function(){l[0].click()},i.bind("click",i[0].__file_click_fn_delegate_),i.css("overflow","hidden"),i=l}i.bind("change",function(e){var i,o,l=[]
if(i=e.__files_||e.target.files,null!=i)for(o=0;o<i.length;o++)if(void 0===a)l.push(i.item(o))
else{var s=a.split(","),c=i.item(o).name.substr((~-i.item(o).name.lastIndexOf(".")>>>0)+2)
s.indexOf(c)>-1&&l.push(i.item(o))}t(function(){r(n,{$files:l,$event:e})})})}}]),e.directive("ngFileDropAvailable",["$parse","$timeout",function(e,t){return function(n,i,o){if("draggable"in document.createElement("span")){var r=e(o.ngFileDropAvailable)
t(function(){r(n)})}}}]),e.directive("ngFileDrop",["$parse","$timeout","$location",function(e,t,n){return function(i,o,r){function a(e){return/^[\000-\177]*$/.test(e)}function l(e,i){var o=[],r=e.dataTransfer.items
if(r&&r.length>0&&r[0].webkitGetAsEntry&&"file"!=n.protocol()&&r[0].webkitGetAsEntry().isDirectory)for(var l=0;l<r.length;l++){var c=r[l].webkitGetAsEntry()
null!=c&&(a(c.name)?s(o,c):r[l].webkitGetAsEntry().isDirectory||o.push(r[l].getAsFile()))}else{var d=e.dataTransfer.files
if(null!=d)for(var l=0;l<d.length;l++)o.push(d.item(l))}!function p(e){t(function(){u?p(10):i(o)},e||0)}()}function s(e,t,n){if(null!=t)if(t.isDirectory){var i=t.createReader()
u++,i.readEntries(function(i){for(var o=0;o<i.length;o++)s(e,i[o],(n?n:"")+t.name+"/")
u--})}else u++,t.file(function(t){u--,t._relativePath=(n?n:"")+t.name,e.push(t)})}if("draggable"in document.createElement("span")){var c=null
o[0].addEventListener("dragover",function(n){if(n.preventDefault(),t.cancel(c),!o[0].__drag_over_class_)if(r.ngFileDragOverClass&&r.ngFileDragOverClass.search(/\) *$/)>-1){var a=e(r.ngFileDragOverClass)(i,{$event:n})
o[0].__drag_over_class_=a}else o[0].__drag_over_class_=r.ngFileDragOverClass||"dragover"
o.addClass(o[0].__drag_over_class_)},!1),o[0].addEventListener("dragenter",function(e){e.preventDefault()},!1),o[0].addEventListener("dragleave",function(){c=t(function(){o.removeClass(o[0].__drag_over_class_),o[0].__drag_over_class_=null},r.ngFileDragOverDelay||1)},!1)
var d=e(r.ngFileDrop)
o[0].addEventListener("drop",function(e){e.preventDefault(),o.removeClass(o[0].__drag_over_class_),o[0].__drag_over_class_=null,l(e,function(t){d(i,{$files:t,$event:e})})},!1)
var u=0}}}])}()
