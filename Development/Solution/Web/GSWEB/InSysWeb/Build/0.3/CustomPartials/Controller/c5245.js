"use strict";define(["app"],function(a){var d=function(l,j,f,p,m,i,o,n,h,e){if(j.error!==undefined){i.add(j.error,"danger",5000)}l.Sum=function(q,g){return p.Sum(q,g)};l.Max=function(q,g){return p.Max(q,g)};l.Min=function(q,g){return p.Min(q,g)};l.Ave=function(q,g){return p.Ave(q,g)};l.goPrevious=function(){m.go("1065",{},{reload:true,inherit:false,notify:true})};l.Session=n.data;l.mID=1070;l.rID=m.params.ID_1070;l.Master=j.Master;l.Detail=j.Detail;l.dropdown_source=j.dropdown_source;l.rdb_source=j.rdb_source;l.autocomplete_source=j.autocomplete_source;l.gridOptions={2067:{data:"Detail[2067]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID_ApprovalLevel",width:"80",displayName:"Approval Level"},{field:"ID_EmployeeApprover1",width:"*",displayName:"Approver",cellTemplate:"<div ng-form name='x' ng-class=\"{ 'has-error' : x.ID_EmployeeApprover1.$invalid && mainform.$submitted }\" ><input type='text' name='EmployeeApprover1' placeholder='Approver' ng-change=\"clearAutoComplete(row.entity,'ID_EmployeeApprover1')\"  ng-disabled='row.entity.IsCanOverride == 0 || Master.ID_FilingStatus != 1' typeahead-append-to-body='true' typeahead-on-select=\"setID(row.entity,'ID_EmployeeApprover1',$item)\" typeahead='item as item.Name for item in autocomplete_source[2189] | filter:$viewValue | limitTo:10' class='form-control' ng-model='row.entity.EmployeeApprover1'/><input type='hidden' name='ID_EmployeeApprover1'  required class='form-control' ng-model='row.entity.ID_EmployeeApprover1'/></div>"},{field:"ID_EmployeeApprover2",width:"*",displayName:"Alternate Approver 1",cellTemplate:"<div ng-form name='x' ><input type='text' name='EmployeeApprover2' placeholder='Alternate Approver 1' ng-change=\"clearAutoComplete(row.entity,'ID_EmployeeApprover2')\"  ng-disabled='row.entity.IsCanOverride == 0 || Master.ID_FilingStatus != 1' typeahead-append-to-body='true' typeahead-on-select=\"setID(row.entity,'ID_EmployeeApprover2',$item)\" typeahead='item as item.Name for item in autocomplete_source[2190] | filter:$viewValue | limitTo:10' class='form-control' ng-model='row.entity.EmployeeApprover2'/><input type='hidden' name='ID_EmployeeApprover2' class='form-control' ng-model='row.entity.ID_EmployeeApprover2'/></div>"},{field:"ID_EmployeeApprover3",width:"*",displayName:"Alternate Approver 2",cellTemplate:"<div ng-form name='x' ><input type='text' name='EmployeeApprover3' placeholder='Alternate Approver 2' ng-change=\"clearAutoComplete(row.entity,'ID_EmployeeApprover3')\"  ng-disabled='row.entity.IsCanOverride == 0 || Master.ID_FilingStatus != 1' typeahead-append-to-body='true' typeahead-on-select=\"setID(row.entity,'ID_EmployeeApprover3',$item)\" typeahead='item as item.Name for item in autocomplete_source[2191] | filter:$viewValue | limitTo:10' class='form-control' ng-model='row.entity.EmployeeApprover3'/><input type='hidden' name='ID_EmployeeApprover3' class='form-control' ng-model='row.entity.ID_EmployeeApprover3'/></div>"},{field:"IsCanOverride",width:"*",displayName:"IsCanOverride",visible:false,cellTemplate:"<input type='hidden' name='IsCanOverride' class='form-control' ng-model='row.entity.IsCanOverride'/>"},{field:"ID",width:20,displayName:"",cellTemplate:"<div ng-if='Detail[2067].length == row.entity.ID_ApprovalLevel' class='ngCellText'><span><a class='row-delete' ng-click='removeRow(2067,row)'  ><i class='fa fa-times'></i></a></span></div>"},],init:function(q,g){setTimeout(function(){g.gridOptions[2067].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[2067].$gridScope,g.gridOptions[2067].ngGrid)},500)}},4097:{data:"Detail[4097]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ApprovalLevel",width:"*",displayName:"Level",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.ApprovalLevel | trustedHTML'></span></div>"},{field:"EmployeeApprover1",width:"*",displayName:"Approver 1",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.EmployeeApprover1 | trustedHTML'></span></div>"},{field:"EmployeeApprover2",width:"*",displayName:"Alternate Approver 1",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.EmployeeApprover2 | trustedHTML'></span></div>"},{field:"EmployeeApprover3",width:"*",displayName:"Alternate Approver 2",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.EmployeeApprover3 | trustedHTML'></span></div>"},{field:"FilingStatus",width:"*",displayName:"Status",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.FilingStatus | trustedHTML'></span></div>"},{field:"Comment",width:"*",displayName:"Notes/Remarks"},{field:"DateValidated",width:"*",displayName:"Action Date",headerCellTemplate:o.get("nggrid/headerCellTemplateDate.html"),cellFilter:"date:'MM/dd/yyyy'"},],init:function(q,g){setTimeout(function(){g.gridOptions[4097].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[4097].$gridScope,g.gridOptions[4097].ngGrid)},500)}},};l.removeRow=function(g,q){if(q.entity.ID==0){l.Detail[g].splice(q.rowIndex,1)}else{f.GridDelete(g,q.entity.ID).then(function(r){l.Detail[g].splice(q.rowIndex,1)})}};l.setID=function(q,r,g){q[r.substring(3)]=g.Name;q[r]=g.ID};l.clearAutoComplete=function(g,q){g[q]=null};l.getAutoCompleteItems=function(q,g,r){return f.getAutoCompleteItems(q,g,r).then(function(s){return s.items})};l.tabs=[];l.tabs.activeTab=0;l.loadedTab=[];l.loadTab=function(g){f.loadTab(g,l.rID).then(function(q){l.Detail[g]=q.data})};l.selectedFiles=[];l.onFileSelect=function(g,s,t,r){for(var q=0;q<l.selectedFiles.length;q++){if(l.selectedFiles[q].mID==s&&l.selectedFiles[q].name==t&&l.selectedFiles[q].idx==r){l.selectedFiles.splice(q,1);break}}l.selectedFiles.push({file:g[0],mID:s,name:t,idx:r})};l.getPositionDetails=function(){f.getPositionDetails(l.Master.ID_Designation).then(function(q){l.Master.Company=q.data.Company;l.Master.CompanyGroup=q.data.CompanyGroup;l.Master.Department=q.data.Department;l.Master.ReportsTo=q.data.ReportsTo;l.Master.JobClass=q.data.JobClass;l.Master.Designation=q.data.Name;l.Master.Budgeted=q.data.Budgeted;l.Master.Actual=q.data.Actual;l.Master.OpenVacancy=q.data.OpenVacancy;l.Master.ActiveVacancy=q.data.ActiveVacancy;l.dropdown_source[4548]=q.empresigned;console.log(q);var g="";if(q.data.WorkLocation!=null){g+="<p>Work Location: "+q.data.WorkLocation+"<p>"}if(q.data.WorkExperiences!=null){g+="<p>Work Experience: "+q.data.WorkExperiences+"<p>"}if(q.data.EducationDegree!=null){g+="<p>Educational Attainment: "+q.data.EducationDegree+"<p>"}if(q.data.Licenses!=null){g+="<p>Licenses: "+q.data.Licenses+"<p>"}if(g.length==0){g=null}l.Master.Qualifications=g;l.Master.KeyResults=q.data.JobSummary})};l.$watch("Master.ID_MRFNatureOfRequest",function(q,r){if((r==3||r==4)&&l.Master.SBAR!=null&&(q!=3&&q!=4)){var g=h.confirm(undefined,"Attached SBAR will be removed. Continue?",{size:"sm"});g.result.then(function(s){l.Master.SBAR=null;l.Master.SBAR_GUID=null},function(s){l.Master.ID_MRFNatureOfRequest=r})}});l.toggleUpload=function(){document.getElementById("uploadFile").click()};l.AttachFiles=function(g,s){var q=g.length;var r=0;for(r=0;r<q;r++){f.UploadMRFFile(g[r],l.Master.ID,s).then(function(t){if(t.IsWithSBAR==1){l.Master.IsWithSBAR=t.IsWithSBAR}l.loadTab(4085);i.add(t.message,"info",5000)})}};l.DownloadMRFFile=function(q,g){DownloadFile("../Contents/Attachments/MRF/"+q.AttachedFileName)};l.removeMRFAttachment=function(q,g,r){f.removeMRFAttachment(q,g,l.Master.ID).then(function(s){l.Master.IsWithSBAR=s.IsWithSBAR;i.add(s.message,"info",5000);l.loadTab(4085)})};l.loadModal=function(r,g){var q=h.create("Dialogs/c1070Dialog.html","c1070Dialog",{ID:r,Action:g},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});q.result.then(function(u){var s="ID_"+l.mID;var t={};t[s]=l.rID;m.go(m.current,t,{reload:true,inherit:false,notify:true})},function(){})};l.viewComment=function(r,q){var g=h.create("Dialogs/c4097Dialog.html","c4097Dialog",{row:r},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(s){l.Detail[4097][q].Comment=s.Comment},function(){})};l.CancelApplication=function(){f.CancelApplication(l.Master.ID,2).then(function(g){l.Master.ID_FilingStatus=g.statusid;l.Master.FilingStatus=g.statusname})};l.OnHoldApplication=function(){f.OnHoldApplication(l.Master.ID,2).then(function(g){m.go(m.current,m.params,{reload:true,inherit:false,notify:true})})};l.removeLiRow=function(r,q,g){if(g==0){l.Detail[r].splice(q,1)}else{f.GridDelete(r,g).then(function(s){l.Detail[r].splice(q,1)})}};e.check(l);var k=0;l.NatureOfRequest=function(){if(l.Master.ID_MRFNatureOfRequest==2){k=l.Master.RequestHeadCount;l.Master.RequestHeadCount=1}else{l.Master.RequestHeadCount=k}};l.AddNewApprover=function(){f.AddNewRow(2067).then(function(g){g.data.ID_ApprovalLevel=l.Detail[2067].length+1;g.data.ID_HRMSMatrixModule=2;g.data.RefID=l.Master.ID;g.data.IsCanOverride=1;l.Detail[2067].push(g.data)})};l.CascadingDropdown=function(r,g,s,q){if(g==1176){l.Master.Company=null;l.Master.CompanyGroup=null;l.Master.Department=null;l.Master.ReportsTo=null;l.Master.JobClass=null;l.Master.Designation=null;l.Master.Budgeted=null;l.Master.Actual=null;l.Master.OpenVacancy=null;l.Master.ActiveVacancy=null;l.Master.ID_Designation=null}f.CascadingDropdown(r,g,s).then(function(v){var t=q.split(",");for(var u=0;u<t.length;u++){l.dropdown_source[t[u]]=v.data[t[u]]}})}};a.register.controller("c5245",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","dialogs","ckFormPristine",d]);var b=function(j,e,i,f,h){j.Data={Comment:null,ID:f.ID,Action:f.Action};console.log(j.Data);j.cancel=function(){i.dismiss("Canceled")};j.save=function(){e.ApproveModule(j.Data).then(function(g){h.add(g.message,"info",5000);i.close()})}};a.register.controller("c1070Dialog",["$scope","dataService","$modalInstance","data","growlNotifications",b]);var c=function(j,e,i,f,h){j.Data={Comment:f.row.Comment};j.cancel=function(){i.dismiss("Canceled")};j.save=function(){e.SaveComment(f.row.ID,j.Data.Comment,4097).then(function(g){h.add(g.message,"info",5000);i.close({Comment:j.Data.Comment})})}};a.register.controller("c4097Dialog",["$scope","dataService","$modalInstance","data","growlNotifications",c])});