"use strict";define(["app"],function(a){var b=function(j,i,e,n,k,h,m,l,f){if(i.error!==undefined){h.add(i.error,"danger",5000)}j.mID=4103;j.rID=k.params.ID_4103;j.goPrevious=function(){k.go("4102",{},{reload:true,inherit:false,notify:true})};j.Session=l.data;j.Master=i.Master;j.Detail=i.Detail;j.dropdown_source=i.dropdown_source;j.rdb_source=i.rdb_source;j.autocomplete_source=i.autocomplete_source;j.gridOptions={4104:{data:"Detail[4104]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"Name",width:"*",displayName:"Requirements",cellTemplate:"<div ng-form name='x' ng-class=\"{ 'has-error' : x.Name.$invalid && mainform.$submitted }\" ><input type='text' name='Name' placeholder='Requirements'  required class='form-control' ng-model='row.entity.Name'/></div>"},{field:"Value",width:"*",displayName:"ID / Serial #",cellTemplate:"<div ng-form name='x' ><input type='text' name='Value' placeholder='ID / Serial #' class='form-control' ng-model='row.entity.Value'/></div>"},{field:"Document",width:"*",displayName:"File Attachments",cellTemplate:"<div class='smart-form input-group' style='width:100%' ng-form name='x' ><label for='file' class='input input-file'><div class='button'><input type='file' name='Document' file-input ng-file-select='onFileSelect($files,4104,\"Document\",row.rowIndex)'ng-model='row.entity.Document'/>Browse</div><input type='text' ng-model='row.entity.Document' placeholder='Select files...' readonly></label><span class='input-group-addon' ng-if='row.entity.ID > 0 && row.entity.Document !== null' download-file='{{row.entity.Document_GUID}}' filename='{{row.entity.Document}}'><i class='fa fa-download'></i></span></div>"},{field:"Comment",width:"*",displayName:"Notes / Remarks",cellTemplate:"<div ng-form name='x' ><input type='text' name='Comment' placeholder='Notes / Remarks' class='form-control' ng-model='row.entity.Comment'/></div>"},{field:"IsSubmitted",width:"*",displayName:"Submitted?",cellTemplate:"<div class='smart-form noselect'><label class='toggle '><input type='checkbox' name='IsSubmitted' class='form-checkbox' ng-model='row.entity.IsSubmitted'/><i data-swchon-text='Yes' data-swchoff-text='No'></i></label></div>"},{field:"DateSubmitted",width:"*",displayName:"Date Submitted",headerCellTemplate:m.get("nggrid/headerCellTemplateDate.html"),cellTemplate:"<div ng-form name='x' ng-class=\"{ 'has-error' : x.DateSubmitted.$invalid && mainform.$submitted }\" ><div class='input-group'><input type='text' name='DateSubmitted' date-format='MM/dd/yyyy' placeholder='Date Submitted'  ng-required='row.entity.IsSubmitted == 1'  ng-disabled='row.entity.IsSubmitted == 0' bs-datepicker data-container='body' date-to-iso class='form-control' ng-model='row.entity.DateSubmitted'/><span class='input-group-addon'><i class='fa fa-calendar'></i></span></div></div>"},{field:"PreEmploymentRequirementsGroup",width:"*",displayName:"Group",visible:false,cellTemplate:"<input type='hidden' name='PreEmploymentRequirementsGroup' class='form-control' ng-model='row.entity.PreEmploymentRequirementsGroup'/>"},{field:"ID_PreEmploymentRequirementsGroup",width:"*",displayName:"Group",cellTemplate:"<div ng-form name='x' ><select name='ID_PreEmploymentRequirementsGroup' ng-options='item.ID as item.Name for item in dropdown_source[9378]'  class='form-control' ng-model='row.entity.ID_PreEmploymentRequirementsGroup'><option value>- Select -</option></select>"},{field:"ID_Persona",width:"*",displayName:"ID_Persona",visible:false,cellTemplate:"<input type='hidden' name='ID_Persona' class='form-control' ng-model='row.entity.ID_Persona'/>"},{field:"ID",width:20,displayName:"",cellTemplate:"<div class='ngCellText'><span><a class='row-delete' ng-click='removeRow(4104,row)'  ><i class='fa fa-times'></i></a></span></div>"},],groups:["PreEmploymentRequirementsGroup",],groupsCollapsedByDefault:false,init:function(g,d){setTimeout(function(){d.gridOptions[4104].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4104].$gridScope,d.gridOptions[4104].ngGrid)},500)}},4109:{data:"Detail[4109]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"RecruitmentProcess",width:"150",displayName:"Document",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.RecruitmentProcess | trustedHTML'></span></div>"},{field:"GenerationDate",width:"140",displayName:"Generation Date",cellFilter:"date:'MM/dd/yyyy'",headerCellTemplate:m.get("nggrid/headerCellTemplateDate.html"),},{field:"IssuanceDate",width:"160",displayName:"Issuance Date",headerCellTemplate:m.get("nggrid/headerCellTemplateDate.html"),cellTemplate:"<div ng-form name='x' ><div class='input-group'><input type='text' ng-disabled='row.entity.GenerationDate == null' name='IssuanceDate' date-format='MM/dd/yyyy' placeholder='Issuance Date' bs-datepicker data-container='body' date-to-iso class='form-control' ng-model='row.entity.IssuanceDate'/><span class='input-group-addon'><i class='fa fa-calendar'></i></span></div></div>"},{field:"AcceptanceDate",width:"160",displayName:"Acceptance Date",headerCellTemplate:m.get("nggrid/headerCellTemplateDate.html"),cellTemplate:"<div ng-form name='x' ><div class='input-group'><input type='text' ng-disabled='row.entity.IssuanceDate == null' name='AcceptanceDate' date-format='MM/dd/yyyy' placeholder='Acceptance Date' bs-datepicker data-container='body' date-to-iso class='form-control' ng-model='row.entity.AcceptanceDate'/><span class='input-group-addon'><i class='fa fa-calendar'></i></span></div></div>"},{field:"ID",width:"180",displayName:"Template",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><a class='control-label' ng-click='GenerateTemplate(row.entity)'>Generate Template</a></div>"},{field:"SignedDocument",width:"*",displayName:"Signed Document",cellTemplate:"<div class='smart-form input-group' style='width:100%' ng-form name='x' ><label for='file' class='input input-file'><div class='button'><input type='file' ng-disabled='row.entity.GenerationDate == null' name='SignedDocument' file-input ng-file-select='onFileSelect($files,4109,\"SignedDocument\",row.rowIndex)'ng-model='row.entity.SignedDocument'/>Browse</div><input type='text' ng-model='row.entity.SignedDocument' placeholder='Select files...' readonly></label><span class='input-group-addon' ng-if='row.entity.ID > 0 && row.entity.SignedDocument !== null' download-file='{{row.entity.SignedDocument_GUID}}' filename='{{row.entity.SignedDocument}}'><i class='fa fa-download'></i></span></div>"},],init:function(g,d){setTimeout(function(){d.gridOptions[4109].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4109].$gridScope,d.gridOptions[4109].ngGrid)},500)}},};j.removeRow=function(d,g){if(g.entity.ID==0){j.Detail[d].splice(g.rowIndex,1)}else{e.GridDelete(d,g.entity.ID).then(function(o){j.Detail[d].splice(g.rowIndex,1)})}};j.tabs=[];j.tabs.activeTab=0;j.selectedFiles=[];j.onFileSelect=function(d,p,q,o){for(var g=0;g<j.selectedFiles.length;g++){if(j.selectedFiles[g].mID==p&&j.selectedFiles[g].name==q&&j.selectedFiles[g].idx==o){j.selectedFiles.splice(g,1);break}}j.selectedFiles.push({file:d[0],mID:p,name:q,idx:o})};j.getDetail=function(d){switch(d){case 4104:j.Detail[4104].push({Name:null,Comment:null,Value:null,Document:null,DateSubmitted:null,PreEmploymentRequirementsGroup:"Others",IsSubmitted:false,ID_PreEmploymentRequirementsGroup:6,ID_Persona:j.Master.ID_Persona,ID:0});break}};j.GenerateTemplate=function(d){e.LoadEmploymentTemplates(d.ID_RecruitmentProcess).then(function(o){var g=f.create("Dialogs/c4103Template.html","c4103Template",{row:d,templates:o.data},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(p){e.GenerateEmploymentProcessingTemplate({ID:d.ID}).then(function(q){if(q.error!=undefined){h.add(q.error,"danger",5000);return}d.RecruitmentProcessStatus=q.data.Name;d.GenerationDate=q.data.GenerationDate})},function(){})})}};a.register.controller("c4103",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","dialogs",b]);var c=function(j,e,i,f,h){j.TemplateName=f.row.RecruitmentProcess;j.Templates=f.templates;j.LoadTemplate=function(d){e.downloadFile("Upload/"+d.AttachedFileName_GUID,d.AttachedFileName);i.close("CLOSE")};j.cancel=function(){i.dismiss("Canceled")}};a.register.controller("c4103Template",["$scope","dataService","$modalInstance","data","growlNotifications",c])});