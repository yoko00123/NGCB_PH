"use strict";define(["app"],function(a){var b=function(p,l,c,x,q,j,w,t,m,f,h){if(l.error!==undefined){j.add(l.error,"danger",5000)}p.Sum=function(g,d){return x.Sum(g,d)};p.Max=function(g,d){return x.Max(g,d)};p.Min=function(g,d){return x.Min(g,d)};p.Ave=function(g,d){return x.Ave(g,d)};var i="<div ng-show='showFooter' class='ngFooterPanel' ng-style='footerStyle()'><div class='ngTotalSelectContainer' ><div class='ngFooterTotalItems' ng-class=\"{'ngNoMultiSelect':!multiSelect}\"><span class='ngLabel'>View {{(totalServerItems==0?0:pagingOptions.pageSize*(pagingOptions.currentPage-1)+1)}}-{{(totalServerItems<(pagingOptions.pageSize*pagingOptions.currentPage)?totalServerItems:pagingOptions.pageSize*pagingOptions.currentPage)}} of {{totalServerItems}}</span><span ng-show='filterText.length>0' class='ngLabel'>({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span></div></div><div class='ngPagerContainer' style='float:right;margin-top:6px;' ng-show='enablePaging' ng-class=\"{'ngNoMultiSelect':!multiSelect}\"><div style='float:left;margin-right:10px;' class='ngRowCountPicker'><span style='float:left;margin-top:4.5px;' class='ngLabel'>{{i18n.ngPageSizeLabel}}&nbsp;</span><select style='float:left;height:25px;width:50px' ng-model='pagingOptions.pageSize'><option ng-repeat='size in pagingOptions.pageSizes'>{{size}}</option></select></div><div style='float:left;margin-right:10px;line-height:25px;' class='ngPagerControl' style='float:left;min-width:135px;'><button type='button' class='ngPagerButton' ng-click='pageToFirst()' ng-disabled='cantPageBackward()' title='{{i18n.ngPagerFirstTitle}}'><div class='ngPagerFirstTriangle'><div class='ngPagerFirstBar'></div></div></button><button type='button' class='ngPagerButton' ng-click='pageBackward()' ng-disabled='cantPageBackward()' title='{{i18n.ngPagerPrevTitle}}'><div class='ngPagerFirstTriangle ngPagerPrevTriangle'></div></button><button type='button' class='ngPagerButton' ng-click='pageForward()' ng-disabled='cantPageForward()' title='{{i18n.ngPagerNextTitle}}'><div class='ngPagerLastTriangle ngPagerNextTriangle'></div></button><button type='button' class='ngPagerButton' ng-click='pageToLast()' ng-disabled='cantPageToLast()' title='{{i18n.ngPagerLastTitle}}'><div class='ngPagerLastTriangle'><div class='ngPagerLastBar'></div></div></button></div></div></div>";p.Session=t.data;p.$watch(function(){return m.employee},function(){p.employee=m.employee});p.gridData=l.gridData;p.pagingOptions={4063:{pageSizes:[10,20,50,100],pageSize:10,currentPage:1},};p.sortInfo={4063:{fields:["ID"],directions:["DESC"],firstload:true},};angular.forEach(p.pagingOptions,function(g,d){p.$watch("pagingOptions["+d+"].pageSize",function(r,s){if(r!==s){if(p.pagingOptions[d].currentPage==1){o(d,r,1,p.sortInfo[d].fields[0],p.sortInfo[d].directions[0],p.filter[d])}else{p.pagingOptions[d].currentPage=1}}});p.$watch("pagingOptions["+d+"].currentPage",function(r,s){if(r!==s){o(d,p.pagingOptions[d].pageSize,r,p.sortInfo[d].fields[0],p.sortInfo[d].directions[0],p.filter[d])}});p.$watch("sortInfo["+d+"]",function(r,s){if(s.firstload){p.sortInfo[d].firstload=false}if(r!==s&&!s.firstload){o(d,p.pagingOptions[d].pageSize,p.pagingOptions[d].currentPage,r.fields[0],r.directions[0],p.filter[d])}},true)});p.gridOptions={4063:{data:"gridData[4063]",virtualizationThreshold:50,enableColumnResize:true,columnDefs:[{field:"Details",width:"30",displayName:" ",cellTemplate:"<div class='ngCellText'><span><a ui-sref='{{row.entity.ID_WebMenus}}({ ID_{{row.entity.ID_WebMenus}}:row.entity.$$ReferenceID})'><i class='fa fa-lg fa-fw fa-edit'></i></a></span></div>"},{field:"WebUserNotificationTypes",width:"*",displayName:"Type",visible:false},{field:"WebMenus",width:"*",displayName:"Name",visible:false},{field:"Message",width:"*",displayName:"Description"},{field:"DateTimeCreated",width:"170",displayName:"Date",headerCellTemplate:w.get("nggrid/headerCellTemplateDate.html"),cellFilter:"date:'MM/dd/yyyy HH:mm:ss'"},],totalServerItems:l.totalServerItems[4063],groups:["WebUserNotificationTypes",],groupsCollapsedByDefault:false,init:function(g,d){setTimeout(function(){d.gridOptions[4063].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4063].$gridScope,d.gridOptions[4063].ngGrid)},500)}},};p.filter={4063:{},};p.clearFilter=function(d){p.filter[d]={};p.Search(d)};p.dropdown_source=l.dropdown_source;p.rdb_source=l.rdb_source;p.Search=function(d){o(d,p.pagingOptions[d].pageSize,p.pagingOptions[d].currentPage,p.sortInfo[d].fields[0],p.sortInfo[d].directions[0],p.filter[d])};function o(u,z,d,r,g,s){c.getPagedData(u,z,d,r,g,s).then(function(A){p.gridData[u]=A.data;if(u==4063){p.gridOptions[u].totalServerItems=A.totalServerItems}p.filterNotifications(p.selectedNotificationType.ID,p.selectedNotificationTab);if(!p.$$phase){p.$apply()}})}p.active_tab="Home";p.setActiveTab=function(d){p.active_tab=d};p.pieLabels=["Download Sales","In-Store Sales","Mail Sales"];p.pieData=[300,500,100];p.options={scaleShowVerticalLines:false};p.barLabels=["2006","2007","2008","2009","2010","2011","2012"];p.series=["Series A","Series B"];p.barData=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]];p.lineLabels=["January","February","March","April","May","June","July"];p.lineSeries=["Series A","Series B"];p.lineData=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90],[78,43,50,12,83,67,91]];p.updateValues=function(){p.lineData=p.lineData.map(function(d){return d.map(function(g){g=g+Math.random()*10-5;return parseInt(g<0?0:g>100?100:g)})});p.barData=p.barData.map(function(d){return d.map(function(g){g=g+Math.random()*10-5;return parseInt(g<0?0:g>100?100:g)})});p.pieData=p.pieData.map(function(d){d=d+Math.random()*10-5;return parseInt(d<0?0:d>100?100:d)})};p.tree={};c.loadOrgChart().then(function(d){p.tree=d.data});p.calendarControl={};p.calendarView="month";p.calendarDay=new Date();p.events=[];var y=moment(p.calendarDay).year(),k=moment(p.calendarDay).month()+1;var v=moment([y,k-1]).toDate();n(v,moment(v).endOf("month").toDate());p.prev=function(){p.calendarControl.prev();n(p.calendarControl.getFirstDayOfMonth(),p.calendarControl.getLastDayOfMonth())};p.next=function(){p.calendarControl.next();n(p.calendarControl.getFirstDayOfMonth(),p.calendarControl.getLastDayOfMonth())};p.setCalendarToToday=function(){p.calendarControl.setCalendarToToday();n(p.calendarControl.getFirstDayOfMonth(),p.calendarControl.getLastDayOfMonth())};function n(g,d){c.GetCalendarSource(g,d).then(function(r){p.events=r.data})}p.setDone=function(d){c.SetDone(d).then(function(g){j.add(g.message,"info",5000);o(4063,0,1,"DateTimeCreated","DESC",{});o(5251,0,1,"SeqNo","ASC",{});o(5252,0,1,"SeqNo","ASC",{})})};p.Notifications=[];p.selectedNotificationType;p.selectedNotificationTab;p.NotificationTabs=[{IsActive:true,Name:"Pending",mID:5251},{IsActive:false,Name:"Done",mID:5252}];p.sort={column:"DateTimeCreated",descending:true};var e=new Date();p.notifyFilter={cols:{Message:"",dateFrom:"",dateTo:""},state:false,minDate:"12/31/"+parseInt(e.getFullYear()-10),sDate:"1/1/"+parseInt(e.getFullYear()-10)};p.toggleFilter=function(){p.notifyFilter.state=!p.notifyFilter.state;if(p.notifyFilter.state==false){p.notifyFilter.cols.Message="";p.notifyFilter.cols.dateFrom="";p.notifyFilter.cols.dateTo="";p.searchNotifications()}};p.Notifications;p.filteredNotifications;p.filterNotifications=function(d,g){p.selectedNotificationTab=g;var s;var r=p.gridData[g.mID];s=jQuery.grep(r,function(u,z){return u.ID==d});if(s.length>0){p.selectedNotificationType=s[0]}p.Notifications=jQuery.grep(p.gridData[4063],function(u,z){return u.IsActive==g.IsActive&&u.ID_WebUserNotificationTypes==d});p.searchNotifications()};p.searchNotifications=function(){p.filteredNotifications=h("daterange")(h("filter")(p.Notifications,p.notifyFilter.cols.Message),"DateCreated",p.notifyFilter.cols.dateFrom,p.notifyFilter.cols.dateTo)};p.filterNotifications(1,p.NotificationTabs[0]);p.selectedAll=false;p.checkAll=function(){p.selectedAll=!p.selectedAll;angular.forEach(p.filteredNotifications,function(d){d.IsChecked=p.selectedAll})};p.approvalButton=function(r){var d;d=jQuery.grep(p.filteredNotifications,function(s,u){return s.IsChecked==1});if(d.length==0){j.add("select rows to "+((r==2)?"approve":"disapprove")+".","warning",5000)}else{var g=f.confirm(undefined,((r==2)?"Approve":"Disapprove")+" requests?",{size:"sm"});g.result.then(function(s){var u={params:"",Action:r};for(var z=0;z<d.length;z++){u.params+=d[z].ID_HRMSMatrixModule+","+p.Session.ID_Employee+","+d[z].ReferenceID+((z+1<d.length)?"|":"")}c.HRMSBatchApproval(u).then(function(A){o(4063,0,1,"DateTimeCreated","DESC",{});o(5251,0,1,"SeqNo","ASC",{});o(5252,0,1,"SeqNo","ASC",{});j.add(A.message,"info",5000)})},function(s){})}};p.testScroll=function(){}};a.register.controller("c1002",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","$rootScope","dialogs","$filter",b])});