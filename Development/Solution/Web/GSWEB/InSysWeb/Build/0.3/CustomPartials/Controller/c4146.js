"use strict";define(["app"],function(a){var b=function(k,j,f,o,l,i,n,m,e,h){if(j.error!==undefined){i.add(j.error,"danger",5000)}k.Sum=function(g,d){return o.Sum(g,d)};k.Max=function(g,d){return o.Max(g,d)};k.Min=function(g,d){return o.Min(g,d)};k.Ave=function(g,d){return o.Ave(g,d)};k.mID=4146;k.rID=l.params.ID_4146;k.goPrevious=function(){l.go("4145",{},{reload:true,inherit:false,notify:true})};k.Session=m.data;k.Master=j.Master;k.Parent=j.Parent;k.Detail=j.Detail;k.dropdown_source=j.dropdown_source;k.rdb_source=j.rdb_source;k.autocomplete_source=j.autocomplete_source;k.text_autocomplete_source=j.text_autocomplete_source;k.gridOptions={4150:{data:"Detail[4150]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:30,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span><a ui-sref='4146.4150({ ID_4150:row.entity.$$rID})'><i class='fa fa-lg fa-fw fa-edit'></i></a></span></div>"},{field:"ID",width:100,displayName:"ID"},{field:"Code",width:100,displayName:"Number",cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Code | trustedHTML'></span></div>"},{field:"Name",width:"*",displayName:"Name",cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Name | trustedHTML'></span></div>"},{field:"Comment",width:"*",displayName:"Description"},{field:"ID",width:20,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span><a class='row-delete' ng-click='removeRow(4150,row)'  ng-show='Master.IsActive == 0'  ><i class='fa fa-times'></i></a></span></div>"},],init:function(g,d){setTimeout(function(){d.gridOptions[4150].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4150].$gridScope,d.gridOptions[4150].ngGrid)},500)}},4152:{data:"Detail[4152]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:30,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()' ng-if='row.entity.ID > 0'><span><a ui-sref='4146.4152({ ID_4152:row.entity.$$rID})'><i class='fa fa-lg fa-fw fa-edit'></i></a></span></div>"},{field:"ID",width:100,displayName:"ID"},{field:"SeqNo",width:100,displayName:"No."},{field:"Name",width:"*",displayName:"Criteria",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.Name | trustedHTML'></span></div>"},{field:"PercentWeight",width:"50",displayName:"% Weight",cellTemplate:"<div ng-form name='x' ng-class=\"{ 'has-error' : x.PercentWeight.$invalid && mainform.$submitted }\" ><input type='text' name='PercentWeight' placeholder='% Weight'  required style='width:50px;' class='form-control' ng-model='row.entity.PercentWeight'/></div>"},{field:"ID_PerformanceAppraisalForms",width:"*",displayName:"Performance Appraisal Forms",visible:false,cellTemplate:"<input type='hidden' name='ID_PerformanceAppraisalForms' class='form-control' ng-model='row.entity.ID_PerformanceAppraisalForms'/>"},{field:"PerformanceAppraisalCategory",width:"*",displayName:"Performance Appraisal Category",visible:false,cellTemplate:"<input type='hidden' name='PerformanceAppraisalCategory' class='form-control' ng-model='row.entity.PerformanceAppraisalCategory'/>"},{field:"ID",width:20,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span><a class='row-delete' ng-click='removeRow(4152,row)'  ng-show='Master.IsActive == 0'  ><i class='fa fa-times'></i></a></span></div>"},],groups:["PerformanceAppraisalCategory",],init:function(g,d){setTimeout(function(){d.gridOptions[4152].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4152].$gridScope,d.gridOptions[4152].ngGrid)},500)}},4153:{data:"Detail[4153]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:30,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span><a ui-sref='4146.4153({ ID_4153:row.entity.$$rID})'><i class='fa fa-lg fa-fw fa-edit'></i></a></span></div>"},{field:"ID",width:100,displayName:"ID"},{field:"SeqNo",width:100,displayName:"No."},{field:"Name",width:"*",displayName:"Name",cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Name | trustedHTML'></span></div>"},{field:"PerformanceAppraisalFormSummaryTypes",width:"*",displayName:"Summary Type"},{field:"ID",width:20,displayName:"",cellTemplate:"<div class='ngCellText' ng-class='col.colIndex()'><span><a class='row-delete' ng-click='removeRow(4153,row)'  ng-show='Master.IsActive == 0'  ><i class='fa fa-times'></i></a></span></div>"},],init:function(g,d){setTimeout(function(){d.gridOptions[4153].$gridServices.DomUtilityService.RebuildGrid(d.gridOptions[4153].$gridScope,d.gridOptions[4153].ngGrid)},500)}},};k.removeRow=function(g,p){var d=k.Detail[g].indexOf(p.entity);if(p.entity.ID==0){k.Detail[g].splice(d,1)}else{f.GridDelete(g,p.entity.ID).then(function(q){k.Detail[g].splice(d,1)})}};k.setID=function(g,p,d){g[p.substring(3)]=d.Name;g[p]=d.ID};k.getAutoCompleteItems=function(g,d,p){return f.getAutoCompleteItems(g,d,p).then(function(q){return q.items})};k.tabs=[];k.tabs.activeTab=(localStorage.getItem("mID")==k.mID?(localStorage.getItem("tab")==undefined?0:localStorage.getItem("tab")):0);localStorage.removeItem("mID");localStorage.removeItem("tab");k.loadedTab=[];k.loadTab=function(d){if(k.loadedTab.indexOf(d)==-1){f.loadTab(d,k.rID).then(function(g){k.Detail[d]=g.data;k.loadedTab.push(d)})}};k.selectedFiles=[];k.onFileSelect=function(d,q,r,p){for(var g=0;g<k.selectedFiles.length;g++){if(k.selectedFiles[g].mID==q&&k.selectedFiles[g].name==r&&k.selectedFiles[g].idx==p){k.selectedFiles.splice(g,1);break}}k.selectedFiles.push({file:d[0],mID:q,name:r,idx:p})};k.CascadingDropdown=function(p,d,q,g){f.CascadingDropdown(p,d,q).then(function(t){var r=g.split(",");for(var s=0;s<r.length;s++){k.dropdown_source[r[s]]=t.data[r[s]]}})};k.loadDetailsFromOtherFormList=function(){f.LoadDetailsFromOtherFormList(k.rID).then(function(g){var d=h.create("Dialogs/c4146Dialog.html","c4146Dialog",{source:g.data,id:k.rID},{size:"lg",keyboard:true,backdrop:true,windowClass:"my-class"})})};e.check(k)};a.register.controller("c4146",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","ckFormPristine","dialogs",b]);var c=function(k,e,j,f,i,h,l){k.Title="Appraisal Forms";k.Count=f.source.length;k.source=f.source;k.cancel=function(){j.dismiss("Canceled")};k.confirmLoadDetails=function(g){var d=h.confirm(undefined,"Load selected Appraisal Form details?",{size:"sm",keyboard:true,backdrop:true,windowClass:"my-class"});d.result.then(function(m){k.LoadDetailsFromOtherForm(g)},function(){console.log("No")})};k.LoadDetailsFromOtherForm=function(d){k.Data={ID:f.id,ID_Target:d};e.LoadDetailsFromOtherForm(k.Data).then(function(g){if(g.message.length>0){i.add(g.message,"danger",5000)}else{l.go(l.current,l.params,{reload:true,inherit:false,notify:true});k.cancel()}})}};a.register.controller("c4146Dialog",["$scope","dataService","$modalInstance","data","growlNotifications","dialogs","$state",c])});