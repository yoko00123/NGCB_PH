"use strict";define(["app"],function(a){var j=function(af){var ag=0;for(var ae in af){if(af[ae]&&af[ae].hasOwnProperty&&af[ae].hasOwnProperty("$invalid")&&af[ae].$name!="import-excel"){if(af[ae].$invalid){return ag}ag++}}return 0};var k=function(af){var ag=1;for(var ae in af){if(af[ae]&&af[ae].hasOwnProperty&&af[ae].hasOwnProperty("$invalid")){if(String(af[ae].$name).indexOf("master")>-1){if(af[ae].$invalid){return ag}ag++}}}return 0};var ac=angular.module("wDirectives",[]);var q=function(af,ae,ag){return{restrict:"A",replace:true,transclude:true,scope:{menus:"="},template:'<ul><li sly-repeat="menu in menus" ng-class="{ \'open && !isMenuOnTop() \' : menu.Collapsed }" ><a href="" ng-if="menu.Children.length > 0" ng-click="collapse(menu)"  ><span class="menu-item-parent">{{menu.Name}}</span><b class="collapse-sign" ng-if="!menu.Collapsed && isMenuOnTop()"><em class="fa fa-plus-square-o"></em></b><b class="collapse-sign" ng-if="menu.Collapsed && isMenuOnTop()"><em class="fa fa-minus-square-o"></em></b></a><a ng-if="menu.Children.length == 0 && (menu.Name!=\'Home\' && menu.Name!=\'ApplicantDashboard\')" ui-sref="{{menu.ID}}" ><span class="menu-item-parent">{{menu.Name}}</span></a><a class="home" ng-if="menu.Children.length == 0 && (menu.Name==\'Home\')" ui-sref="{{menu.ID}}" ><i class="fa fa-lg fa-fw fa-home"></i></a><div ng-if="menu.Children.length > 0" ng-class="{ \'show\' : menu.Collapsed, \'hide\' : !menu.Collapsed }"  ng-recursive-menu menus="menu.Children" class="animate-show" ><div ng-transclude></div></div></li></ul>',compile:function(ak,ah,al){var aj=ak.contents().remove();var ai;return function(ao,an,am){if(!ai){ai=af(aj,al)}ao.collapse=function(ap){console.log(ag);if(ag){return}ap.Collapsed=!ap.Collapsed};ao.isMenuOnTop=function(){return !ag};ai(ao,function(ap,aq){an.append(ap)})}},}};ac.directive("ngRecursiveMenu",["$compile","$document","isNotMobile",q]);var Z=function(af,ae,ag){return{restrict:"A",link:function(aj,ai){var ak,ah,al;return ah=angular.element(ae[0].body),ai.on("click",function(am){am.stopPropagation();return ah.hasClass("hidden-menu")?ah.removeClass("hidden-menu"):(ah.addClass("hidden-menu"),af.$broadcast("hideNav:enabled")),am.preventDefault()}),ak=void 0,al=function(){var am;return am=ag.innerWidth,768>am?ah.removeClass("hidden-menu"):void 0},angular.element(ag).bind("resize",function(){var am;return clearTimeout(am),am=setTimeout(al,300)})}}};ac.directive("toggleHideNav",["$rootScope","$document","$window",Z]);var Y=function(af,ae){return{restrict:"A",link:function(aj,ah){var ag,ai=document.documentElement;return ag=angular.element(ae[0].body),ah.on("click",function(ak){return ag.hasClass("full-screen")?(ag.removeClass("full-screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()):(ag.addClass("full-screen"),ai.requestFullscreen?ai.requestFullscreen():ai.mozRequestFullScreen?ai.mozRequestFullScreen():ai.webkitRequestFullscreen?ai.webkitRequestFullscreen():ai.msRequestFullscreen&&ai.msRequestFullscreen())})}}};ac.directive("toggleFullScreen",["$rootScope","$document",Y]);var W=function(ae){return{restrict:"A",link:function(ah,af){var ag;return ag=af.parent(),ae.on("click",function(ai){if(ag.hasClass("open")){ag.removeClass("open")}}),af.on("click",function(ai){return ag.hasClass("open")?ag.removeClass("open"):ag.addClass("open"),ai.stopPropagation()})}}};ac.directive("toggleDropdown",["$document",W]);var X=function(){return{restrict:"A",link:function(al,ah,ae){var ak=ae.toggleFilter,ai=angular.element("#grid-filter-"+ak),ag=angular.element("body"),af=angular.element('<div class="aside-backdrop am-fade"/>');af.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":"1038",display:"block","background-color":"rgba(0,0,0,.5)"});function aj(){ai.addClass("hide");af.remove()}return ah.on("click",function(am){af.on("click",aj);ag.append(af);return ai.hasClass("hide")?ai.removeClass("hide"):ai.addClass("hide"),ai.css({top:70})})}}};ac.directive("toggleFilter",[X]);var U=function(ae){return{restrict:"EA",link:function(ah,ag,af){var ai='<div id="ribbon"><ol class="breadcrumb bcrumb"><li ng-repeat="breadcrumb in breadcrumbs">{{breadcrumb.name}}</li></ol></div>';ai=ae(ai)(ah);ag.replaceWith(ai)}}};ac.directive("ngRibbon",["$compile",U]);var ab=function(ag,ah,ai,af,ae){return{restrict:"EA",transclude:true,s:{wcOverlayDelay:"@"},template:'<div id="overlay-container" class="overlayContainer"><div id="overlay-background" class="overlayBackground"></div><div id="overlay-content" class="overlayContent" data-ng-transclude></div></div>',link:function(av,ak,aj){var aq=null,ax=null,ay=null,ao=false,ap=true,au=[];an();function an(){aA();aq=document.getElementById("overlay-container")}function aA(){af.request=function(aB){if(aB.disableInterceptor==undefined||aB.disableInterceptor==false){ar()}return aB||ag.when(aB)};af.response=function(aB){at();return aB||ag.when(aB)};af.responseError=function(aB){at();console.log(aB.data);ae.add("Error occurred. Contact system administrator.","danger",5000);return aB||ag.when(aB)}}function az(){$(document).ajaxStart(function(){ar()});$(document).ajaxComplete(function(){at()});$(document).ajaxError(function(){at()});var aB=$("body");aB.livequery("iframe",function(aC){ar();$("iframe").ready(function(aD){at()})})}function ar(){au.push({});if(au.length==1){ax=ah(function(){if(au.length){aw()}},av.wcOverlayDelay?av.wcOverlayDelay:300)}}function at(){au.pop();if(au.length==0){ay=ah(function(){if(au.length==0){am();if(ay){ah.cancel(ay)}}},av.wcOverlayDelay?av.wcOverlayDelay:300)}}function aw(){var aF=0;var aE=0;if(!ai.innerWidth){if(!(document.documentElement.clientWidth==0)){aF=document.documentElement.clientWidth;aE=document.documentElement.clientHeight}else{aF=document.body.clientWidth;aE=document.body.clientHeight}}else{aF=ai.innerWidth;aE=ai.innerHeight}var aB=document.getElementById("overlay-content");var aD=parseInt(al(aB,"width").replace("px",""));var aC=parseInt(al(aB,"height").replace("px",""));aB.style.top=aE/2-(isNaN(aC)?0:aC)/2+"px";aB.style.left=aF/2-aD/2+"px";aq.style.display="block"}function am(){if(ax){ah.cancel(ax)}aq.style.display="none"}var al=function(){var aB=null;if(document.defaultView&&document.defaultView.getComputedStyle){aB=document.defaultView.getComputedStyle}else{if(typeof(document.body.currentStyle)!=="undefined"){aB=function(aD,aC){return aD.currentStyle}}}return function(aC,aD){return aB(aC,null)[aD]}}()}}},n=function(ae){ae.interceptors.push("httpInterceptor")},m=function(){return{}};ac.factory("httpInterceptor",m);ac.config(["$httpProvider",n]);ac.directive("wcOverlay",["$q","$timeout","$window","httpInterceptor","growlNotifications",ab]);var b=function(ag,af,ah,ae){return{response:function(ai){if(ai.status===401){console.log("Response 401")}return ai||ag.when(ai)},responseError:function(ai){if(ai.status===401){window.location="login.aspx"}if(ai.status===404||ai.status===500){ah(function(){af.path("/404");setTimeout(function(){var aj=ae.get("$modalStack");var ak=aj.getTop();if(ak){aj.dismiss(ak.key)}},150)})}return ag.reject(ai)}}},l=function(ae){ae.interceptors.push("authHttpResponseInterceptor")};ac.factory("authHttpResponseInterceptor",["$q","$location","$timeout","$injector",b]);ac.config(["$httpProvider",l]);var F=function(ae){return{restrict:"A",scope:"=",link:function(aj,ag,af){var ah=af.mid,ai=af.mtype;ag.on("click",function(){var ak="ID_"+ah;var al={};al[ak]=0;switch(parseInt(ai)){case 3:ae.go(String(ah),al);break;case 12:if(ae.current.name.split(".").indexOf(ah)==-1){ae.go(ae.current.name+"."+ah,al)}else{ae.go(ae.current.name,al)}break;default:}})}}};ac.directive("ngFormNew",["$state",F]);var I=function(ae,ag,ah,ai,af,aj){return{restrict:"A",scope:"=",link:function(ap,ao,ak){var al=ak.btnid,am=ak.confirm,an=ak.delay;ao.on("click",function(){ap.mainform.$submitted=true;if(ap.mainform.$valid){localStorage.setItem("mID",ap.mID);localStorage.setItem("tab",ap.tabs.activeTab==undefined?0:ap.tabs.activeTab);if(am===undefined){ap.mainform.$setPristine();ae.Save(ap.mID,ap.rID,al,ap.Master,ap.Detail,ap.selectedFiles).then(function(av){if(av.messageType==2){ag.add(av.message,"danger",5000)}else{var ar="ID_"+ap.mID;var au={};au[ar]=av.ID;for(var at in ah.params){if(at!=ar){au[at]=ah.params[at]}}ah.go(ah.current,au,{reload:true,inherit:false,notify:true});ag.add(av.message,"info",5000)}ap.mainform.$submitted=false})}else{var aq=af.confirm(undefined,am,{size:"sm",keyboard:true,backdrop:true});aq.result.then(function(ar){ap.mainform.$setPristine();ae.Save(ap.mID,ap.rID,al,ap.Master,ap.Detail,ap.selectedFiles).then(function(aw){if(aw.messageType==2){ag.add(aw.message,"danger",5000)}else{var at="ID_"+ap.mID;var av={};av[at]=aw.ID;for(var au in ah.params){if(au!=at){av[au]=ah.params[au]}}ah.go(ah.current,av,{reload:true,inherit:false,notify:true});ag.add(aw.message,"info",5000)}ap.mainform.$submitted=false})},function(ar){})}}else{aj(function(){if(ap.mainform.$error.pattern||ap.mainform.$error.minlength||ap.mainform.$error.maxlength){ag.add("Invalid values on other fields.","danger",5000)}else{if(ap.mainform.$error.ngMin){ag.add("Input value does not meet the minimum value.","danger",5000)}else{if(ap.mainform.$error.ngMax){ag.add("Input value exceeded the maximum value.","danger",5000)}else{ag.add("Fill all the required fields.","danger",5000)}}}ap.tabs.activeTab=j(ap.mainform)-(an==undefined?0:an)})}});ap.$on("destroy",function(){ao.off()})}}};ac.directive("ngFormSave",["dataService","growlNotifications","$state","$stateParams","dialogs","$timeout",I]);var D=function(ae,ag,ah,af){return{restrict:"EA",link:function(am,al,ai){var aj=ai.btnid,an=parseInt(ai.targetMid),ao=ai.targetTab,ak=ai.confirm;al.bind("click",function(){am.mainform.$submitted=true;var aq=k(am.mainform);if(aq==0){if(ak===undefined){ae.Generate(am.mID,am.rID,aj,am.Master).then(function(ar){if(ar.messageType==2){ag.add(ar.message,"danger",5000)}else{ag.add(ar.message,"info",5000);am.Detail[an]=ar.data;am.loadedTab.push(an);am.tabs.activeTab=ao}am.mainform.$submitted=false})}else{var ap=af.confirm(undefined,ak,{size:"sm",keyboard:true,backdrop:true});ap.result.then(function(ar){ae.Generate(am.mID,am.rID,aj,am.Master).then(function(at){if(at.messageType==2){ag.add(at.message,"danger",5000)}else{ag.add(at.message,"info",5000);am.Detail[an]=at.data;am.loadedTab.push(an);am.tabs.activeTab=ao}am.mainform.$submitted=false})},function(ar){})}}else{ah(function(){ag.add("Fill all the required fields.","danger",5000);am.tabs.activeTab=aq-1})}})}}};ac.directive("ngFormGenerate",["dataService","growlNotifications","$timeout","dialogs",D]);var J=function(ae,ag,ah,af,ai){return{restrict:"A",scope:"=",link:function(an,am,aj){var ak=aj.btnid,al=aj.confirm;am.bind("click",function(){an.mainform.$submitted=true;if(an.mainform.$valid){localStorage.setItem("mID",an.mID);localStorage.setItem("tab",an.tabs.activeTab==undefined?0:an.tabs.activeTab);if(al===undefined){an.mainform.$setPristine();ae.SpecialCommand(an.mID,an.rID,ak,an.Master).then(function(at){if(at.messageType==2){ag.add(at.message,"danger",5000)}else{var ap="ID_"+an.mID;var ar={};ar[ap]=at.ID;for(var aq in ah.params){if(aq!=ap){ar[aq]=ah.params[aq]}}if(at.ID=="0"){ah.go(at.mID,{},{reload:true})}else{ah.go(ah.current.name,ar,{reload:true})}ag.add(at.message,"info",5000)}an.mainform.$submitted=false})}else{var ao=af.confirm(undefined,al,{size:"sm",keyboard:true,backdrop:true});ao.result.then(function(ap){an.mainform.$setPristine();ae.SpecialCommand(an.mID,an.rID,ak,an.Master).then(function(au){if(au.messageType==2){ag.add(au.message,"danger",5000)}else{var aq="ID_"+an.mID;var at={};at[aq]=au.ID;for(var ar in ah.params){if(ar!=aq){at[ar]=ah.params[ar]}}if(au.ID=="0"){ah.go(au.mID,{},{reload:true})}else{ah.go(ah.current.name,at,{reload:true})}ag.add(au.message,"info",5000)}an.mainform.$submitted=false})},function(ap){})}}else{ai(function(){ag.add("Fill all the required fields.","danger",5000);an.tabs.activeTab=j(an.mainform)})}})}}};ac.directive("ngFormSpecialCommand",["dataService","growlNotifications","$state","dialogs","$timeout",J]);var G=function(){return{restrict:"A",scope:"=",link:function(ah,af,ae){var ag=ae.ngFormPrint;af.bind("click",function(){var ak=document.getElementById(ag).innerHTML;var ai=document.body.innerHTML;var aj=window.open("","_blank","width=1200,height=800");aj.document.open();aj.document.write('<html><head><link rel="stylesheet" type="text/css" href="Styles/System/bootstrap.3.2.min.css" /><link rel="stylesheet" type="text/css" href="Styles/System/ng-grid.css"/><link rel="stylesheet" type="text/css" href="Styles/System/font-awesome.min.css"/><link rel="stylesheet" type="text/css" href="Styles/Default/default.css"/><link rel="stylesheet" type="text/css" href="Styles/Default/additional.css"/><link rel="stylesheet" type="text/css" href="Styles/Skins/green.css"/></head><body onload="window.print()">'+ak+"</html>");aj.document.close()})}}};ac.directive("ngFormPrint",G);var M=function(ae,af){return{restrict:"A",scope:"=",link:function(aj,ah,ag){var ai=ag.ngLoadColumns;ah.on("click",function(){var ak=af.create("Dialogs/LoadColumns.html","cLoadColumns",{columns:aj.gridOptions[ai].columnDefs,colException:"ID"},{size:"md",keyboard:true,backdrop:"static"});ak.result.then(function(al){console.log(al);aj.gridOptions[ai].columnDefs=al;aj.gridOptions[ai].$gridScope.firstAdjustmentLeft=false;aj.gridOptions[ai].ngGrid.lateBoundColumns=false;aj.gridOptions[ai].$gridScope.columns.length=0;aj.gridOptions[ai].ngGrid.config.columnDefs=al;aj.gridOptions[ai].ngGrid.buildColumns();aj.gridOptions[ai].ngGrid.eventProvider.assignEvents();aj.gridOptions[ai].$gridServices.DomUtilityService.RebuildGrid(aj.gridOptions[ai].$gridScope,aj.gridOptions[ai].ngGrid)},function(al){})})}}};ac.directive("ngLoadColumns",["dataService","dialogs",M]);var x=function(ae,af,ag,ah){return{restrict:"A",scope:"=",link:function(al,aj,ai){var ak=ai.ngColumnSelection;aj.on("click",function(){ae.ColumnSelection(ak).then(function(an){var am=af.create("Dialogs/ColumnSelection.html?v="+Web_System_Version,"ColumnSelection",{columns:an.data},{size:"md",keyboard:true,backdrop:"static"});am.result.then(function(ao){ae.SaveColumnSelection(ak,ao).then(function(ap){if(ap.error.length>0){ag.add(ap.error,"danger",5000)}else{ah.go(ah.current,ah.params,{reload:true,inherit:false,notify:true})}})},function(ao){})})})}}};ac.directive("ngColumnSelection",["dataService","dialogs","growlNotifications","$state",x]);var L=function(ae,ag,af){return{restrict:"A",scope:"=",link:function(am,ak,ah){var al=ah.mid,ai=ah.btnid,aj=ah.confirm;ak.bind("click",function(){if(aj===undefined){ae.GenerateExcelTemplate(al,ai,am.rID==undefined?0:am.rID)}else{var an=af.confirm(undefined,aj);an.result.then(function(ao){ae.GenerateExcelTemplate(al,ai,am.rID==undefined?0:am.rID)},function(ao){})}})}}};ac.directive("ngGenerateExcelTemplate",["dataService","growlNotifications","dialogs",L]);var B=function(ae){return{restrict:"A",scope:"=",link:function(ai,ag,af){var ah=af.mid;ag.bind("click",function(){ae.ExportToExcel(ah,ai.pagingOptions[ah].pageSize,ai.pagingOptions[ah].currentPage,ai.sortInfo[ah].fields[0],ai.sortInfo[ah].directions[0],ai.filter[ah],ai.rID)})}}};ac.directive("ngExportToExcel",["dataService",B]);var r=function(ae,af,ag){return{restrict:"A",scope:"=",link:function(al,ai,ah){var aj=ah.mid,ak=ah.mtype;ai.bind("click",function(){ae.AddNewRow(aj,al.Master).then(function(am){if(ak=="17"){al.gridData[aj].push(am.data)}else{al.Detail[aj].push(am.data)}if(!al.$$phase){al.$apply()}})})}}};ac.directive("ngAddNewRow",["dataService","growlNotifications","$state",r]);var v=function(ae,af,ag){return{restrict:"A",scope:"=",link:function(al,aj,ah){var ai=ah.btnid,ak=parseInt(ah.mid);aj.on("click",function(){al["grid-"+ak].$submitted=true;if(al["grid-"+ak].$valid){ae.BatchGridSave(ak,ai,al.gridData[ak]).then(function(ao){if(ao.messageType==2){af.add(ao.message,"danger",5000)}else{var am="ID_"+al.mID;var an={};an[am]=ao.ID;ag.go(ag.current.name,an,{reload:true});af.add(ao.message,"info",5000)}al["grid-"+ak].$submitted=false})}else{af.add("Fill all the required fields.","danger",5000)}})}}};ac.directive("ngBatchGridSave",["dataService","growlNotifications","$state",v]);var u=function(af,ah,ai,ae,ag){return{restrict:"A",scope:"=",link:function(ao,am,aj){var an=aj.mid,al=aj.confirm;am.bind("click",function(){var aq=ao.gridEvents[an].getSelectedRows();if(aq.length==0){ae(function(){ah.add("Select a record.","danger",5000)},0)}else{if(al===undefined||al.length==0){ak()}else{var ap=ag.confirm(undefined,al,{size:"sm",keyboard:true,backdrop:true});ap.result.then(function(ar){ak()})}}});function ak(){var ar=ao.gridEvents[an].getSelectedRows();var aq=new Array();for(var ap=0;ap<ar.length;ap++){aq.push(ar[ap].ID)}af.BatchGridDelete(an,aq).then(function(at){if(at.message!=""){ah.add(at.message,"danger",5000)}else{ai.go(ai.current.name,{},{reload:true});ah.add("Record deleted!","danger",5000)}})}}}};ac.directive("ngBatchGridDelete",["dataService","growlNotifications","$state","$timeout","dialogs",u]);var s=function(ae,af,ag){return{restrict:"A",scope:"=",link:function(al,aj,ah){var ak=ah.mid,ai=ah.btnid;aj.bind("click",function(){var ao=al.gridEvents[ak].getSelectedRows();if(ao.length==0){af.add("Select a record.","danger",5000)}else{var an=new Array();for(var am=0;am<ao.length;am++){an.push(ao[am].ID)}ae.BatchGridCommand(ak,ai,an).then(function(ap){ag.go(ag.current.name,{},{reload:true});af.add(ap.message,"info",5000)})}})}}};ac.directive("ngBatchGridCommand",["dataService","growlNotifications","$state",s]);var R=function(ae,af){return{restrict:"EA",link:function(ai,ah,ag){ah.bind("click",function(){ae.Publish(ai.Master).then(function(aj){af.add(aj.message,"info",5000)})})}}};ac.directive("ngPublish",["dataService","growlNotifications",R]);var Q=function(){return{restrict:"A",scope:"=",link:function(ag,af,ae){af.bind("keydown",function(ah){if(ah.which!=8&&ah.which!=0&&(ah.which<48||ah.which>57)){return false}})}}};ac.directive("ngNumericOnly",[Q]);var y=function(){return{restrict:"A",scope:"=",link:function(ah,af,ae){var ag=ae.fixedDecimal;af.bind("change keydown keyup",function(ai){if(ai.which!=8&&ai.which!=0&&ai.which!=190&&ai.which!=110&&(ai.which<48||ai.which>57)){return false}if((ai.which==190||ai.which==110)&&af.val().split(".").length-1>=1){return false}});if(ag!=undefined){af.bind("blur",function(ai){af.val(parseFloat(af.val()).toFixed(ag))})}}}};ac.directive("ngCurrencyOnly",[y]);var aa=function(af,ae){return{restrict:"A",scope:{feedbackType:"@",label:"@",formValidation:"@"},link:function(al,ai,ag){var ak=ai;var aj=ak.parent();function ah(am){function an(){aj.removeClass("has-feedback");aj.removeClass("has-success");aj.removeClass("has-warning");aj.removeClass("has-error");aj.find(".form-control-feedback").remove()}an();if(am==="SUCCESS"){aj.addClass("has-success")}else{if(am==="WARNING"){aj.addClass("has-warning")}else{if(am==="ERROR"){aj.addClass("has-error")}}}}al.$on("validateFormEvent",function(am,an){if(al.formValidation==="true"){ah("SUCCESS")}else{ah("ERROR")}})}}};ac.directive("validatedInput",["$tooltip","$interval",aa]);var ad=function(){return{restrict:"EA",link:function(ag,af,ae){$(af).draggable()}}};ac.directive("wdraggable",[ad]);var e=function(){return{restrict:"A",require:"ngModel",link:function(ah,af,ae,ag){ag.$parsers.push(function(ai){return moment(ai).format("YYYY-MM-DD 00:00:00")})}}};ac.directive("dateToIso",[e]);var V=function(){return{restrict:"A",require:"ngModel",link:function(ah,af,ae,ag){ag.$parsers.push(function(ai){return moment(ai).format("YYYY-MM-DD HH:mm:ss")})}}};ac.directive("timeToIso",[V]);var d=function(){return{restrict:"A",link:function(ag,af,ae){af.bind("click",function(){var ai=angular.element(document.getElementsByTagName("body"));var aj=[];var ah=function(al){angular.forEach(["$scope","$isolateScope"],function(am){if(al.data()&&al.data().hasOwnProperty(am)){angular.forEach(al.data()[am].$$watchers,function(an){aj.push(an)})}});angular.forEach(al.children(),function(am){ah(angular.element(am))})};ah(ai);var ak=[];angular.forEach(aj,function(al){if(ak.indexOf(al)<0){ak.push(al)}});console.log(ak.length)})}}};ac.directive("countWatch",[d]);var i=function(){return{require:"ngModel",link:function(ah,af,ae,ag){af.bind("change",function(ai){var aj=af.val().split("\\");ah.$apply(function(){ag.$setViewValue(aj[aj.length-1]);ag.$render()})})}}};ac.directive("fileInput",[i]);var K=function(ae,af,ag,ah){return{restrict:"A",scope:"=",link:function(al,ak,ai){var aj=ai.btnid;ak.on("click",function(){al.mainform.$submitted=true;if(al.mainform.$valid){ae.FormUpload(al.mID,al.rID,aj,al.Master,al.Detail,al.selectedFiles).then(function(ao){if(ao.messageType==2){af.add(ao.message,"danger",5000)}else{var am="ID_"+al.mID;var an={};an[am]=ao.ID;ag.go(ag.current,ah,{reload:true,inherit:false,notify:true});af.add(ao.message,"info",5000)}al.mainform.$submitted=false})}else{af.add("Fill all the required fields.","danger",5000);al.tabs.activeTab=j(al.mainform)}})}}};ac.directive("ngFormUpload",["dataService","growlNotifications","$state","$stateParams",K]);var h=function(ae){return{restrict:"A",link:function(aj,ag,af){var ah=af.downloadFile,ai=af.filename;ag.on("click",function(){ae.downloadFile("Upload/"+ah,ai)})}}};ac.directive("downloadFile",["dataService",h]);var T=function(){return{restrict:"A",link:function(ai,ag,ae){var af={showThumbs:true,ignoreSizing:true};var ah=["direction"];angular.forEach(ah,function(aj){if(angular.isDefined(ae[aj])){af[aj]=ae[aj]}});setTimeout(function(){$(ag[0]).overscroll(af)},0)}}};ac.directive("overScroll",[T]);var c=function(){return{restrict:"A",link:function(ah,af,ae){var ag=angular.element(af).parent().children(".pull-left");af.bind("scroll",function(ai){$(ag).scrollTop(angular.element(af).prop("scrollTop"))})}}};ac.directive("comparisonScroll",[c]);var H=function(ae,ag,ah,ai,af,aj){return{restrict:"A",scope:"=",link:function(am,al,ak){al.on("click",function(){var aq=ak.mid;var ap=new Array();if(am.gridOptions!=undefined){if(am.gridOptions[aq]!=undefined){for(var ao=0;ao<am.gridOptions[aq].selectedItems.length;ao++){ap.push(am.gridOptions[aq].selectedItems[ao].ID)}}else{if(ak.customrefid!=undefined){ap.push(ak.customrefid)}else{ap.push(am.Master.ID)}}}else{if(ak.customrefid!=undefined){ap.push(ak.customrefid)}else{ap.push(am.Master.ID)}}var an=af.create("Dialogs/PrintReport.html","PrintReport",{rID:ap,mID:aq},{size:"xl",keyboard:true,backdrop:"static",windowClass:"my-class"})})}}};ac.directive("ngFormPrintReport",["dataService","growlNotifications","$state","$stateParams","dialogs","$timeout",H]);function p(){var ae=new Date().getTime();t(function(){var af=(new Date().getTime()-ae)+" ms";console.log("ANGULAR - List updated in: "+af)})}var o=function(am,ag,al,ah){var ae=ah.cid;am.lookupdata={};am.lookupdata.data=ah.lookup_source;var ai=1,aj;var af=[];var ak=ai;var ap=am.lookupdata.data[ai];for(aj in ap){var an=aj;var ao=ap.j;af.push(an)}am.lookupdata.col=af;am.lookupdata.name=ah.label;am.cancel=function(){al.dismiss()};am.getVal=function(at,aq){var ar={};ar.Name=aq;ar.Value=at;al.close(ar)}};var E=function(ae,ag,ah,ai,af,aj){a.register.controller("LookUp",["$scope","dataService","$modalInstance","data",o]);return{restrict:"A",scope:{targetName:"=",targetValue:"=",targetSource:"="},link:function(am,al,ak){al.on("click",function(){var an=ak.cid;var ap=ak.ngModel;var ao=af.create("Dialogs/LookUp.html","LookUp",{lookup_source:am.targetSource,label:ak.placeholder,cid:an},{size:"xl",keyboard:true,backdrop:"static",windowClass:"my-class"});ao.result.then(function(aq){am.targetName=aq.Name;am.targetValue=aq.Value})})}}};ac.directive("ngFormLookup",["dataService","growlNotifications","$state","$stateParams","dialogs","$timeout",E]);var g=function(an,ag,al,ah){var ae=ah.cid;an.detailedlookupdata={};an.detailedlookupdata.data=ah.detailedlookup_source;an.detailedValuelookup=ah.detailedValuelookup_source;angular.forEach(an.detailedValuelookup,function(au,at){var ar=an.detailedlookupdata.data.filter(function(av){return av.ID==au.ID});an.detailedlookupdata.data.map(function(av,aw){if(av.ID==ar[0].ID){an.detailedlookupdata.data[aw].selected=true}})});var ai=1,aj;var af=[];var ak=ai;var aq=an.detailedlookupdata.data[ai];for(aj in aq){var ao=aj;var ap=aq.j;if(ao!="selected"){af.push(ao)}}an.detailedlookupdata.col=af;an.detailedlookupdata.name=ah.label;an.cancel=function(){al.close(am)};var am={};am.Value=[];angular.forEach(an.detailedValuelookup,function(ar){am.Value.push(ar.ID)});an.getVal=function(at){if($("#cbox_"+at).is(":checked")){am.Value.push(at)}else{var ar=am.Value.indexOf(at);if(ar>-1){am.Value.splice(ar,1)}}};an.checkAll=function(ar){var at=ar.target;var au=at.checked;if(au){am.Value=[]}angular.forEach(an.detailedlookupdata.data,function(aw){aw.selected=au;if(au){am.Value.push(aw.ID)}else{var av=am.Value.indexOf(aw.ID);if(av>-1){am.Value.splice(av,1)}}})}};var C=function(ae,ag,ah,ai,af,aj){a.register.controller("DetailedLookUp",["$scope","dataService","$modalInstance","data",g]);return{restrict:"A",scope:{targetValue:"=",targetDetailSource:"=",targetSource:"="},link:function(am,al,ak){al.on("click",function(){var an=ak.cid;var ap=ak.ngModel;var ao=af.create("Dialogs/DetailedLookUp.html","DetailedLookUp",{detailedValuelookup_source:am.targetDetailSource,detailedlookup_source:am.targetSource,label:ak.placeholder,cid:an},{size:"xl",keyboard:true,backdrop:"static",windowClass:"my-class"});ao.result.then(function(aq){am.targetValue=aq.Value;am.targetDetailSource=[];angular.forEach(aq.Value,function(at){var ar={ID:at};am.targetDetailSource.push(ar)})})})}}};ac.directive("ngFormDetailedLookup",["dataService","growlNotifications","$state","$stateParams","dialogs","$timeout",C]);var z=function(ae){return{restrict:"A",scope:"=",link:function(am,ai,af){var ag=af.cid;var an="";am.detailedlookupdata={};am.detailedlookupdata.data=am.detailedlookup_source[ag];var aj=1,ak;var ah=[];var al=aj;var aq=am.detailedlookupdata.data[aj];for(ak in aq){var ao=ak;var ap=aq.j;if(ao!="selected"){ah.push(ao)}}am.detailedlookupdata.col=ah;an+="<table width='100%' align='center' ng-if='detailedValuelookup_source["+ag+"].length > 0' class='lookupgrid'>";an+="<thead>";an+="<th ng-repeat='title in detailedlookupdata.col'>{{title}}</th>";an+="</thead>";an+="<tbody>";an+="<tr ng-repeat='d in detailedValuelookup_source["+ag+"]'>";an+="<td ng-repeat='t in detailedlookupdata.col' ng-lookup-filter-result filter-source='detailedlookup_source["+ag+"]' filter-source-column='t' filter-source-value='d.ID'></td>";an+="</tr>";an+="</tbody>";an+="</table>";ai.append(ae(an)(am))}}};ac.directive("ngDetailedLookupGrid",["$compile",z]);var N=function(ae){return{restrict:"A",scope:{filterSourceColumn:"=",filterSourceValue:"=",filterSource:"="},link:function(aj,ai,ag){var af=aj.filterSource.filter(function(ak){return ak.ID==aj.filterSourceValue});var ah="";angular.forEach(af[0],function(ak,al,am){if(al==aj.filterSourceColumn){ah=ak}});ai.append(ah)}}};ac.directive("ngLookupFilterResult",["$compile",N]);var P=function(){return{restrict:"A",require:"ngModel",link:function(aj,ag,ae,af){function ah(ak){return angular.isUndefined(ak)||ak===""||ak===null||ak!==ak}var ai=function(al){var ak=aj.$eval(ae.ngMin)||0;if(!ah(al)&&al<ak){af.$setValidity("ngMin",false);return undefined}else{af.$setValidity("ngMin",true);return al}};af.$parsers.push(ai);af.$formatters.push(ai)}}};ac.directive("ngMin",P);var O=function(){return{restrict:"A",require:"ngModel",link:function(aj,ag,ae,af){function ah(ak){return angular.isUndefined(ak)||ak===""||ak===null||ak!==ak}var ai=function(al){var ak=aj.$eval(ae.ngMax)||Infinity;if(!ah(al)&&al>ak){af.$setValidity("ngMax",false);return undefined}else{af.$setValidity("ngMax",true);return al}};af.$parsers.push(ai);af.$formatters.push(ai)}}};ac.directive("ngMax",O);var w=function(ae){return{restrict:"A",require:"ngModel",scope:{ngModel:"=?"},link:function(ai,ah,af,ag){ah.on("keyup",function(){var am=ah[0].value;var aj=am.split(" ");for(var al=0;al<aj.length;al++){var ak=aj[al].charAt(0).toUpperCase();aj[al]=ak+aj[al].substr(1).toLowerCase()}ai.$apply(function(){ai.ngModel=aj.join(" ")})})}}};ac.directive("ngCapitalize",w);var A=function(){return{restrict:"A",link:function(ag,af,ae){af.bind("keydown keypress",function(ah){if(ah.which===13){ag.$apply(function(){ag.$eval(ae.ngEnter)});ah.preventDefault()}})}}};ac.directive("ngEnter",A);var S=function(){return{restrict:"A",link:function(ag,af,ae){var ah=0;af.scroll(function(){var ak=af.height();var aj=af.prop("scrollHeight");var ai=aj-ak;if(ai-af.scrollTop()<=ah){ag.$apply(ae.ngScrollEnds)}})}}};ac.directive("ngScrollEnds",S);var f=function(ae){return{restrict:"A",scope:true,link:function(ah,ag,af){ah.collapsed=false;ah.toggle=function(){ah.collapsed=!ah.collapsed};af.$observe("ddTextCollapseText",function(ap){var al=ah.$eval(af.ddTextCollapseMaxLength);if(ap.length>al){var ai=String(ap).substring(0,al);var an=String(ap).substring(al,ap.length);var aj=ae("<span>"+ai+"</span>")(ah);var ao=ae('<span ng-if="collapsed">'+an+"</span>")(ah);var am=ae('<span ng-if="!collapsed">... </span>')(ah);var ak=ae('<br ng-if="collapsed">')(ah);var aq=ae('<span class="collapse-text-toggle" ng-click="toggle()">{{collapsed ? "less" : "more"}}</span>')(ah);ag.empty();ag.append(aj);ag.append(ao);ag.append(am);ag.append(ak);ag.append(aq)}else{ag.empty();ag.append(ap)}})}}};ac.directive("ddTextCollapse",["$compile",f])});