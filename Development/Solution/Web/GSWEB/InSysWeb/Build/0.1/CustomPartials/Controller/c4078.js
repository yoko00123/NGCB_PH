"use strict";define(["app"],function(a){var c=function(n,m,i,t,o,l,k,q,p,j){if(m.error!==undefined){k.add(m.error,"danger",5000)}n.Sum=function(r,g){return t.Sum(r,g)};n.Max=function(r,g){return t.Max(r,g)};n.Min=function(r,g){return t.Min(r,g)};n.Ave=function(r,g){return t.Ave(r,g)};n.mID=4078;n.rID=o.params.ID_4078;n.close=function(){l.dismiss("close");console.log("CLOSE");o.go("^",{reload:true})};n.Session=p.data;n.Master=m.Master;n.Detail=m.Detail;n.dropdown_source=m.dropdown_source;n.rdb_source=m.rdb_source;n.autocomplete_source=m.autocomplete_source;n.gridOptions={};n.removeRow=function(g,r){if(r.entity.ID==0){n.Detail[g].splice(r.rowIndex,1)}else{i.GridDelete(g,r.entity.ID).then(function(s){n.Detail[g].splice(r.rowIndex,1)})}};n.setID=function(r,s,g){r[s.substring(3)]=g.Name;r[s]=g.ID};n.getAutoCompleteItems=function(r,g,s){return i.getAutoCompleteItems(r,g,s).then(function(u){return u.items})};n.tabs=[];n.tabs.activeTab=0;n.loadedTab=[];n.loadTab=function(g){if(n.loadedTab.indexOf(g)==-1){i.loadTab(g,n.rID).then(function(r){n.Detail[g]=r.data;n.loadedTab.push(g)})}};n.refreshTab=function(g){i.loadTab(g,n.rID).then(function(r){n.Detail[g]=r.data})};n.selectedFiles=[];n.onFileSelect=function(g,u,v,s){for(var r=0;r<n.selectedFiles.length;r++){if(n.selectedFiles[r].mID==u&&n.selectedFiles[r].name==v&&n.selectedFiles[r].idx==s){n.selectedFiles.splice(r,1);break}}n.selectedFiles.push({file:g[0],mID:u,name:v,idx:s})};var h={};h=n.Detail[4100];n.toggleUpload=function(){document.getElementById("uploadFile").click()};n.AttachFiles=function(g){var r=g.length;var s=0;for(s=0;s<r;s++){i.UploadAssessmentFile(g[s],n.Master.ID).then(function(u){k.add(u.message,"info",5000);n.refreshTab(4094)})}};n.DownloadAssessmentFile=function(r,g){i.downloadFile("Contents/Attachments/Assessments/"+r.Name_GUID,r.Name)};n.loadModalViewAttachments=function(s,r){var g=j.create("Dialogs/c1061DialogViewAttachments.html","c1061DialogViewAttachments",{row:s,dropdown_source:n.dropdown_source,source:h},{size:"lg",keyboard:true,backdrop:true,windowClass:"my-class"})};n.GetAttachments=function(g){var r;r=jQuery.grep(n.Detail[4099],function(s,u){return s.ID_RecruitmentApplicationProcess==g});return r};n.DownloadAttachment=function(r,g){i.downloadFile("Contents/Attachments/Interview/"+r,g)};n.DownloadProposal=function(r,g){i.downloadFile("Contents/Attachments/ForHiring/"+r,g)};n.removeAttachment=function(r,g,s){i.removeAttachment(r,g).then(function(u){k.add(u.message,"info",5000);n.refreshTab(4099)})};n.createSchedule=function(u,r){var s;if(u!=undefined){s=jQuery.grep(n.Detail[4099],function(v,w){return v.ID_RecruitmentApplicationProcess==u.ID})}var g=j.create("Dialogs/c4078Dialog.html","c4078Dialog",{Name:n.Master.Name,ID_RecruitmentApplications:n.Master.ID,dropdown_source:n.dropdown_source,row:u,attachments:s,ID_RecruitmentStage:n.Master.ID_RecruitmentStage},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(v){n.refreshTab(4081);n.refreshTab(4099);n.refreshTab(4110);n.Master.IsOnProcess=v.isOnProcess;n.Master.ID_RecruitmentProcess=v.ProcessID;n.Master.ID_RecruitmentStage=v.stageID;n.Master.RecruitmentStage=v.stage;n.Master.RecruitmentProcess=v.stageProcess;n.Master.IsCanProceed=v.IsCanProceed},function(){})};n.isProcessDone=function(g){var r;if(n.Master.ID_RecruitmentStage==1){r=jQuery.grep(n.Detail[4081],function(s,u){return s.ID_RecruitmentProcess==g&&s.ID_RecruitmentProcessStatus>0})}else{if(n.Master.ID_RecruitmentStage==2){r=jQuery.grep(n.Detail[4110],function(s,u){return s.ID_RecruitmentProcess==g&&s.ID_RecruitmentProcessStatus>0})}}if(r!=null&&r!=undefined&&r.length>0){return 1}else{return 0}};n.GetProcessName=function(g){console.log(g);if(g>0){var r;r=jQuery.grep(n.Detail[4080],function(s,u){return s.ID==g});if(r.length>0){return r[0].Name}else{return""}}else{return""}};n.SendMail=function(s,r){var g=j.create("Dialogs/cSendMail.html","cSendMail",{row:s,dropdown_source:n.dropdown_source,emailTo:n.Master.EmailAddress},{size:"lg",keyboard:true,backdrop:true,windowClass:"my-class"})};n.EndorseTo=function(g){i.EndorseTo(n.rID,g).then(function(r){n.Master.ID_RecruitmentStage=r.stageID;n.Master.ID_RecruitmentProcess=r.ProcessID;n.Master.RecruitmentStage=r.stage;n.Master.RecruitmentProcess=r.stageProcess;n.dropdown_source[4440]=r.source_4440;n.dropdown_source[4441]=r.source_4441;k.add(r.message,"info",5000);n.refreshTab(4080);n.refreshTab(4081);n.refreshTab(4106)})};n.SetStatusAndComment=function(u,s,g){if(g==1){var r=j.create("Dialogs/c4083AddIntComment.html","c4083AddIntComment",{row:u,Action:g,source:null,ID_RecruitmentApplications:n.rID,ID_RecruitmentStage:n.Master.ID_RecruitmentStage,isCanSave:n.Session.ID_Employee==u.ID_Employee&&u.IsCompleted==0},{size:"md",keyboard:false,backdrop:"static",windowClass:"my-class"});r.result.then(function(v){n.refreshTab(4126);n.refreshTab(4135)},function(){})}else{i.RequestDropdownSource("ID,Name","tRecruitmentProcessStatus","ID_RecruitmentStage="+n.Master.ID_RecruitmentStage).then(function(w){var v=j.create("Dialogs/c4083AddIntComment.html","c4083AddIntComment",{row:u,Action:g,source:w.data,ID_RecruitmentApplications:n.rID,ID_RecruitmentStage:n.Master.ID_RecruitmentStage,isCanSave:n.Session.ID_Employee==u.ID_Employee},{size:"md",keyboard:false,backdrop:"static",windowClass:"my-class"});v.result.then(function(x){n.refreshTab(4126)},function(){})})}};if(n.Master.BirthDate!=undefined){n.Master.BirthDate=moment(n.Master.BirthDate).format("MM/DD/YYYY")}};a.register.controller("c4078",["$scope","resources","dataService","utilService","$state","$modalInstance","growlNotifications","$templateCache","Session","dialogs",c]);var d=function(l,h,k,i,j){l.Data={Schedule:null,ID_Employee:null,Comment:null,ID_RecruitmentProcess:null,ID_RecruitmentProcessStatus:0,RecruitmentProcess:null,ID_RecruitmentApplications:i.ID_RecruitmentApplications,Name:i.Name,Create:1,ID:0};if(i.row!=undefined){l.Data={Schedule:i.row.Schedule,ID_Employee:i.row.ID_Employee,Comment:i.row.Comment,ID_RecruitmentProcess:i.row.ID_RecruitmentProcess,ID_RecruitmentProcessStatus:i.row.ID_RecruitmentProcessStatus,RecruitmentProcess:i.row.RecruitmentProcess,ID_RecruitmentApplications:i.row.ID_RecruitmentApplications,Name:i.Name,Create:0,ID:i.row.ID}}l.dropdown_source={EmployeeSource:{},RecruitmentProcessSource:{},RecruitmentProcessStatusSource:{},};l.dropdown_source.EmployeeSource=i.dropdown_source[4439];l.dropdown_source.RecruitmentProcessSource=i.dropdown_source[4440];l.dropdown_source.RecruitmentProcessStatusSource=i.dropdown_source[4441];l.attachments=i.attachments;l.DownloadAttachment=function(g){DownloadFile("../Contents/Attachments/Interview/"+g)};l.AddAttachment=function(g){var m=g.length;var n=0;for(n=0;n<m;n++){h.UploadInterviewFile(g[n],i.row.ID).then(function(o){if(o.message=="ok"){l.attachments.push({ID:o.ID,ID_RecruitmentApplicationProcess:o.ID_RecruitmentApplicationProcess,Name:o.Name,Name_GUID:o.Name_GUID})}else{j.add(o.message,"error",5000)}})}};l.removeAttachment=function(m,g,n){console.log(g);h.removeAttachment(m,g).then(function(o){j.add(o.message,"info",5000);l.attachments.splice(n)})};l.cancel=function(){k.dismiss("Canceled")};l.save=function(){h.SaveSchedule(l.Data).then(function(g){j.add(g.message,"info",5000);k.close(g)})}};a.register.controller("c4078Dialog",["$scope","dataService","$modalInstance","data","growlNotifications",d]);var b=function(l,h,k,i,j,m){l.Data=i.source;l.dropdown_source=i.dropdown_source;l.cancel=function(){k.dismiss("Canceled")};l.DownloadAttachment=function(g){DownloadFile("../Upload/"+g)}};a.register.controller("c1061DialogViewAttachments",["$scope","dataService","$modalInstance","data","growlNotifications","$state",b]);var f=function(l,h,k,i,j,m){l.Data={emailTo:i.emailTo,Title:null,Body:null};l.dropdown_source=i.dropdown_source;l.save=function(){h.SendMail(l.Data).then(function(g){if(g.message==""){j.add("Email Sent.","info",5000);l.cancel()}else{j.add(g.message,"danger",5000)}})};l.cancel=function(){k.dismiss("Canceled")};l.insertAtCaret=function(o,p){var g=o[0].selectionStart,n=o.val();o.val(n.substring(0,g)+p+n.substring(g))}};a.register.controller("cSendMail",["$scope","dataService","$modalInstance","data","growlNotifications","$state",f]);var e=function(l,h,k,i,j,m){l.Title=(i.Action==1?"Notes / Remarks":"Set Status");l.btnTitle=(i.Action==1?"Save":"Set Status");l.Data={ID:i.row.ID,Comment:i.row.Comment,Action:i.Action,ID_RecruitmentProcessStatus:null,ID_RecruitmentApplications:i.ID_RecruitmentApplications,ID_RecruitmentStage:i.ID_RecruitmentStage};l.isCanSave=i.isCanSave;l.source=i.source;l.save=function(){h.SetStatusAndComment(l.Data).then(function(g){if(g.message==""){k.close({Comment:l.Data.Comment})}else{j.add(g.message,"danger",5000)}})};l.cancel=function(){k.dismiss("Canceled")}};a.register.controller("c4083AddIntComment",["$scope","dataService","$modalInstance","data","growlNotifications","$state",e])});