"use strict";define(["app"],function(a){var b=function(l,k,f,n,m,j,h){if(k.error!==undefined){j.add(k.error,"danger",5000)}l.Sum=function(o,g){return n.Sum(o,g)};l.Max=function(o,g){return n.Max(o,g)};l.Min=function(o,g){return n.Min(o,g)};l.Ave=function(o,g){return n.Ave(o,g)};l.mID=4200;l.rID=m.params.ID_4200;l.goPrevious=function(){m.go("4199",{},{reload:true,inherit:false,notify:true})};l.Master=k.Master;l.Detail=k.Detail;if(l.rID==0||l.rID!=0&&l.Detail[4201].length==0){l.Detail[4201].push({ID:0,Company:"",Designation:"",EmploymentStatus:"",YearsOfService:"",ReasonForLeaving:"",ImmediateSupervisor:"",ImmediateSupervisorDesignation:"",ContactNo:"",ID_Persona:""});l.Detail[4201].push({ID:0,Company:"",Designation:"",EmploymentStatus:"",YearsOfService:"",ReasonForLeaving:"",ImmediateSupervisor:"",ImmediateSupervisorDesignation:"",ContactNo:"",ID_Persona:""});l.Detail[4201].push({ID:0,Company:"",Designation:"",EmploymentStatus:"",YearsOfService:"",ReasonForLeaving:"",ImmediateSupervisor:"",ImmediateSupervisorDesignation:"",ContactNo:"",ID_Persona:""});l.Detail[4201].push({ID:0,Company:"",Designation:"",EmploymentStatus:"",YearsOfService:"",ReasonForLeaving:"",ImmediateSupervisor:"",ImmediateSupervisorDesignation:"",ContactNo:"",ID_Persona:""});l.Detail[4202].push({ID:0,SchoolName:"",DegreeMajorHonor:"",YearsAttended:"",ID_Persona:""});l.Detail[4202].push({ID:0,SchoolName:"",DegreeMajorHonor:"",YearsAttended:"",ID_Persona:""});l.Detail[4203].push({ID:0,Name:"",CompanyName:"",Designation:"",ContactNo:"",ID_Persona:""});l.Detail[4203].push({ID:0,Name:"",CompanyName:"",Designation:"",ContactNo:"",ID_Persona:""});l.Detail[4203].push({ID:0,Name:"",CompanyName:"",Designation:"",ContactNo:"",ID_Persona:""})}l.dropdown_source=k.dropdown_source;l.rdb_source=k.rdb_source;l.gridOptions={4204:{data:"Detail[4204]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:"*",displayName:"ID",visible:false,cellTemplate:"<input type='hidden' name='ID' class='form-control' ng-model='row.entity.ID'/>"},{field:"ID_Questionaire_Details",width:"*",displayName:"ID_Questionaire_Details",visible:false,cellTemplate:"<input type='hidden' name='ID_Questionaire_Details' class='form-control' ng-model='row.entity.ID_Questionaire_Details'/>"},{field:"ID_Persona",width:"*",displayName:"ID_Persona",visible:false,cellTemplate:"<input type='hidden' name='ID_Persona' class='form-control' ng-model='row.entity.ID_Persona'/>"},{field:"TextAreaAnswer",width:"*",displayName:"TextAreaAnswer",cellTemplate:"<div ng-form name='x' ><textarea name='TextAreaAnswer' style='height:40px;' class='form-control' ng-model='row.entity.TextAreaAnswer'></textarea></div>"},{field:"IsCheckAnswer",width:"*",displayName:"IsCheckAnswer",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><div ng-class='for_checkbox'><input type='checkbox' name='IsCheckAnswer' class='form-checkbox' ng-model='row.entity.IsCheckAnswer'/></div></div></div>"},{field:"Question",width:"*",displayName:"Question",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.Question | trustedHTML'></span></div>"},{field:"Choices",width:"*",displayName:"Choices",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.Choices | trustedHTML'></span></div>"},{field:"ID_QuestionaireType",width:"*",displayName:"ID_QuestionaireType",visible:false,cellTemplate:"<input type='hidden' name='ID_QuestionaireType' class='form-control' ng-model='row.entity.ID_QuestionaireType'/>"},],init:function(o,g){setTimeout(function(){g.gridOptions[4204].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[4204].$gridScope,g.gridOptions[4204].ngGrid)},500)}},4201:{data:"Detail[4201]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:"*",displayName:"ID",visible:false,cellTemplate:"<input type='hidden' name='ID' class='form-control' ng-model='row.entity.ID'/>"},{field:"Company",width:"*",displayName:"Company Name",cellTemplate:"<div ng-form name='x' ><textarea name='Company' style='height:40px;' class='form-control' ng-model='row.entity.Company'></textarea></div>"},{field:"Designation",width:"*",displayName:"Position Title",cellTemplate:"<div ng-form name='x' ><textarea name='Designation' style='height:40px;' class='form-control' ng-model='row.entity.Designation'></textarea></div>"},{field:"EmploymentStatus",width:"*",displayName:"Employment Status",cellTemplate:"<div ng-form name='x' ><textarea name='EmploymentStatus' style='height:40px;' class='form-control' ng-model='row.entity.EmploymentStatus'></textarea></div>"},{field:"YearsOfService",width:"*",displayName:"Tenure/No. of years worked",cellTemplate:"<div ng-form name='x' ><textarea name='YearsOfService' style='height:40px;' class='form-control' ng-model='row.entity.YearsOfService'></textarea></div>"},{field:"ReasonForLeaving",width:"*",displayName:"Reason for Leaving",cellTemplate:"<div ng-form name='x' ><textarea name='ReasonForLeaving' style='height:40px;' class='form-control' ng-model='row.entity.ReasonForLeaving'></textarea></div>"},{field:"ImmediateSupervisor",width:"*",displayName:"Immediate Supervisor's Name",cellTemplate:"<div ng-form name='x' ><textarea name='ImmediateSupervisor' style='height:40px;' class='form-control' ng-model='row.entity.ImmediateSupervisor'></textarea></div>"},{field:"ImmediateSupervisorDesignation",width:"*",displayName:"Designation",cellTemplate:"<div ng-form name='x' ><textarea name='ImmediateSupervisorDesignation' style='height:40px;' class='form-control' ng-model='row.entity.ImmediateSupervisorDesignation'></textarea></div>"},{field:"ContactNo",width:"*",displayName:"Superior's contact no.",cellTemplate:"<div ng-form name='x' ><textarea name='ContactNo' style='height:40px;' class='form-control' ng-model='row.entity.ContactNo'></textarea></div>"},{field:"ID_Persona",width:"*",displayName:"ID_Persona",visible:false,cellTemplate:"<input type='hidden' name='ID_Persona' class='form-control' ng-model='row.entity.ID_Persona'/>"},],init:function(o,g){setTimeout(function(){g.gridOptions[4201].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[4201].$gridScope,g.gridOptions[4201].ngGrid)},500)}},4202:{data:"Detail[4202]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"ID",width:"*",displayName:"ID",visible:false,cellTemplate:"<input type='hidden' name='ID' class='form-control' ng-model='row.entity.ID'/>"},{field:"SchoolName",width:"*",displayName:"Name of School",cellTemplate:"<div ng-form name='x' ng-class=\"{ 'has-error' : x.SchoolName.$invalid && mainform.$submitted }\" ><textarea name='SchoolName'  required style='height:40px;' class='form-control' ng-model='row.entity.SchoolName'></textarea></div>"},{field:"DegreeMajorHonor",width:"*",displayName:"Degree/Major/Honors",cellTemplate:"<div ng-form name='x' ><textarea name='DegreeMajorHonor' style='height:40px;' class='form-control' ng-model='row.entity.DegreeMajorHonor'></textarea></div>"},{field:"YearsAttended",width:"*",displayName:"Yrs Attended (From-To)",cellTemplate:"<div ng-form name='x' ><textarea name='YearsAttended' style='height:40px;' class='form-control' ng-model='row.entity.YearsAttended'></textarea></div>"},{field:"ID_Persona",width:"*",displayName:"ID_Persona",visible:false,cellTemplate:"<input type='hidden' name='ID_Persona' class='form-control' ng-model='row.entity.ID_Persona'/>"},],init:function(o,g){setTimeout(function(){g.gridOptions[4202].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[4202].$gridScope,g.gridOptions[4202].ngGrid)},500)}},4203:{data:"Detail[4203]",multiSelect:false,virtualizationThreshold:50,columnDefs:[{field:"Name",width:"*",displayName:"Name",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.Name | trustedHTML'></span></div>"},{field:"CompanyName",width:"*",displayName:"Company",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.CompanyName | trustedHTML'></span></div>"},{field:"Designation",width:"*",displayName:"Position",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.Designation | trustedHTML'></span></div>"},{field:"ContactNo",width:"*",displayName:"Contact #",cellTemplate:"<div class='ngCellText ng-scope pinned col2 colt2' ng-class='col.colIndex()'><span class='control-label' ng-bind-html='row.entity.ContactNo | trustedHTML'></span></div>"},{field:"ID_Persona",width:"*",displayName:"ID_Persona",visible:false,cellTemplate:"<input type='hidden' name='ID_Persona' class='form-control' ng-model='row.entity.ID_Persona'/>"},],init:function(o,g){setTimeout(function(){g.gridOptions[4203].$gridServices.DomUtilityService.RebuildGrid(g.gridOptions[4203].$gridScope,g.gridOptions[4203].ngGrid)},500)}},};l.removeRow=function(g,o){if(o.entity.ID==0){l.Detail[g].splice(o.rowIndex,1)}else{f.GridDelete(g,o.entity.ID).then(function(p){l.Detail[g].splice(o.rowIndex,1)})}};l.setID=function(o,p,g){o[p.substring(3)]=g.Name;o[p]=g.ID};l.getAutoCompleteItems=function(o,g,p){return f.getAutoCompleteItems(o,g,p).then(function(q){return q.items})};l.tabs=[];l.tabs.activeTab=0;l.loadedTab=[];l.loadTab=function(g){if(l.loadedTab.indexOf(g)==-1){f.loadTab(g,l.rID).then(function(o){n.pushArray(l.dropdown_source,o.dropdown_source);n.pushArray(l.rdb_source,o.rdb_source);l.Detail[g]=o.data;l.loadedTab.push(g)})}};l.selectedFiles=[];l.onFileSelect=function(g,r,s,q,o){for(var p=0;p<l.selectedFiles.length;p++){if(l.selectedFiles[p].mID==r&&l.selectedFiles[p].name==s&&l.selectedFiles[p].idx==q){l.selectedFiles.splice(p,1);break}}l.selectedFiles.push({file:g[0],mID:r,name:s,idx:q})};var i=$("#ImageFile");i.bind("change",function(g){var o=new FileReader();o.onload=function(p){$("#ImagePreview").attr("src",p.target.result)};o.readAsDataURL(g.originalEvent.target.files[0])});l.toggleUploadFile=function(){$("#ImageFile").click()};var e={};e=l.Detail[4205];l.loadModalViewAttachments=function(p,o){var g=h.create("c4200DialogViewAttachments.html","c4200DialogViewAttachments",{row:p,dropdown_source:l.dropdown_source,source:e,ID_Persona:l.rID},{size:"lg",keyboard:true,backdrop:true,windowClass:"my-class"})};l.loadModalAttachments=function(p,o){var g=h.create("c4200DialogUploadAttachments.html","c4200DialogUploadAttachments",{row:p,dropdown_source:l.dropdown_source,ID_Persona:l.rID},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"})}};a.register.controller("c4200",["$scope","resources","dataService","utilService","$state","growlNotifications","dialogs",b]);var d=function(j,e,i,f,h,k){j.Data=f.source;j.dropdown_source=f.dropdown_source;j.cancel=function(){i.dismiss("Canceled")};console.log(f.ID_Persona);j.RemoveFiles=function(g,l){e.RemoveFiles(g,"../../Upload/",f.ID_Persona).then(function(m){if(m.message!=""){h.add(m.error,"danger",5000)}else{j.Data.splice(l,1);h.add("File Removed Successfully.!","info",5000)}})};j.DownloadAttachment=function(g){DownloadFile("../Upload/"+g)}};a.register.controller("c4200DialogViewAttachments",["$scope","dataService","$modalInstance","data","growlNotifications","$state",d]);var c=function(j,e,i,f,h,k){j.Data={ID_Persona:f.ID_Persona,Name:null};j.dropdown_source=f.dropdown_source;j.cancel=function(){i.dismiss("Canceled")};j.files={};j.save=function(){e.UploadAttachments(j.files,j.Data.ID_Persona).then(function(g){if(g.message!=""){h.add(g.message,"danger",5000)}else{k.go(k.current.name,{},{reload:true});h.add("Attachments Uploaded Successully!","info",5000)}})};e.RequestDropdownSource("ID,Name","vPersona","ID="+f.ID_Persona).then(function(g){j.dropdown_source.Persona=g.data});j.replaceTxtBox=function(m){var l=Array();var n=0;for(n=0;n<m.length;n++){l.push(m[0]["name"])}var g=l.join();j.files=m;$("#fileholder").attr("value",g)}};a.register.controller("c4200DialogUploadAttachments",["$scope","dataService","$modalInstance","data","growlNotifications","$state",c])});