"use strict";define(["app"],function(a){var b=function(n,l,f,v,o,j,t,p,h,k){n.ExportResumeFile=function(g){f.ExportResumeFile(g).then(function(q){DownloadFile("../ApplicationForm/ApplicationForm.html")})};n.toggleUpload=function(){document.getElementById("uploadJson").click()};n.SaveJsonFile=function(r,y){var s=r.length;var x=0;var A=Array();var z=Array();var q=0;var B=0;var g=[];for(x=0;x<s;x++){var u=r[x]["name"];var w=u.substr(-4);if(w.toLowerCase()=="json"){B=B+1;g.push(f.UploadJsonFile(r[x],y))}else{z.push(u);setTimeout(function(){r.splice(x,1)},200)}}k.all(g).then(function(D){var E=[];var C=[];for(x=0;x<D.length;x++){if(D[x].messageType=="1"){E.push(D[x].oldFileName)}else{C.push(D[x].oldFileName)}}if(E.length>0){j.add(E.join(", ")+" Successfully uploaded!","info",10000)}if(C.length>0){j.add("An error occured while uploading: "+C.join(", "),"danger",10000)}o.go(o.current.name,{},{reload:true})});if(z.length>0){j.add("Invalid File(s): "+z.join(),"danger",10000)}};if(l.error!==undefined){j.add(l.error,"danger",5000)}n.Sum=function(q,g){return v.Sum(q,g)};n.Max=function(q,g){return v.Max(q,g)};n.Min=function(q,g){return v.Min(q,g)};n.Ave=function(q,g){return v.Ave(q,g)};var i="<div ng-show='showFooter' class='ngFooterPanel' ng-style='footerStyle()'><div class='ngTotalSelectContainer' ><div class='ngFooterTotalItems' ng-class=\"{'ngNoMultiSelect':!multiSelect}\"><span class='ngLabel'>View {{(totalServerItems==0?0:pagingOptions.pageSize*(pagingOptions.currentPage-1)+1)}}-{{(totalServerItems<(pagingOptions.pageSize*pagingOptions.currentPage)?totalServerItems:pagingOptions.pageSize*pagingOptions.currentPage)}} of {{totalServerItems}}</span><span ng-show='filterText.length>0' class='ngLabel'>({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span></div></div><div class='ngPagerContainer' style='float:right;margin-top:6px;' ng-show='enablePaging' ng-class=\"{'ngNoMultiSelect':!multiSelect}\"><div style='float:left;margin-right:10px;' class='ngRowCountPicker'><span style='float:left;margin-top:4.5px;' class='ngLabel'>{{i18n.ngPageSizeLabel}}&nbsp;</span><select style='float:left;height:25px;width:50px' ng-model='pagingOptions.pageSize'><option ng-repeat='size in pagingOptions.pageSizes'>{{size}}</option></select></div><div style='float:left;margin-right:10px;line-height:25px;' class='ngPagerControl' style='float:left;min-width:135px;'><button type='button' class='ngPagerButton' ng-click='pageToFirst()' ng-disabled='cantPageBackward()' title='{{i18n.ngPagerFirstTitle}}'><div class='ngPagerFirstTriangle'><div class='ngPagerFirstBar'></div></div></button><button type='button' class='ngPagerButton' ng-click='pageBackward()' ng-disabled='cantPageBackward()' title='{{i18n.ngPagerPrevTitle}}'><div class='ngPagerFirstTriangle ngPagerPrevTriangle'></div></button><button type='button' class='ngPagerButton' ng-click='pageForward()' ng-disabled='cantPageForward()' title='{{i18n.ngPagerNextTitle}}'><div class='ngPagerLastTriangle ngPagerNextTriangle'></div></button><button type='button' class='ngPagerButton' ng-click='pageToLast()' ng-disabled='cantPageToLast()' title='{{i18n.ngPagerLastTitle}}'><div class='ngPagerLastTriangle'><div class='ngPagerLastBar'></div></div></button></div></div></div>";n.Session=p.data;n.gridData=l.gridData;n.pagingOptions={1061:{pageSizes:[10,20,50,100],pageSize:10,currentPage:1},};n.sortInfo={1061:{fields:["ID"],directions:["DESC"],firstload:true},};angular.forEach(n.pagingOptions,function(q,g){n.$watch("pagingOptions["+g+"].pageSize",function(r,s){if(r!==s){if(n.pagingOptions[g].currentPage==1){m(g,r,1,n.sortInfo[g].fields[0],n.sortInfo[g].directions[0],n.filter[g])}else{n.pagingOptions[g].currentPage=1}}});n.$watch("pagingOptions["+g+"].currentPage",function(r,s){if(r!==s){m(g,n.pagingOptions[g].pageSize,r,n.sortInfo[g].fields[0],n.sortInfo[g].directions[0],n.filter[g])}});n.$watch("sortInfo["+g+"]",function(r,s){if(s.firstload){n.sortInfo[g].firstload=false}if(r!==s&&!s.firstload){m(g,n.pagingOptions[g].pageSize,n.pagingOptions[g].currentPage,r.fields[0],r.directions[0],n.filter[g])}},true)});n.gridOptions={1061:{data:"gridData[1061]",virtualizationThreshold:50,selectedItems:[],checkboxCellTemplate:"<div class='ngSelectionCell'><input tabindex='-1' class='ngSelectionCheckbox' type='checkbox' ng-checked='row.selected && row.entity.IsCanEndorsed == 1' ng-disabled='!(row.entity.IsCanEndorsed == 1)'   /></div>",showSelectionCheckbox:true,enablePinning:true,checkboxHeaderTemplate:"<input class='ngSelectionHeader' type='checkbox' ng-show='multiSelect' ng-model='allSelected' ng-change=\"toggleSelectAll(allSelected,true,'row.entity.IsCanEndorsed == 1')\"/>",columnDefs:[{field:"ID",width:30,displayName:null,visible:true,pinned:true,cellTemplate:"<div class='ngCellText'><span><a ui-sref='1061({ ID_1061:row.entity.$$rID})'><i class='fa fa-lg fa-fw fa-edit'></i></a></span></div>"},{field:"Name1",width:"250",displayName:"Name",visible:true,pinned:true,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Name1 | trustedHTML'></span></div>"},{field:"LatestPositionEndorsed",width:"200",visible:true,displayName:"Last Applied Position"},{field:"ApplicationDate",width:"125",displayName:"Date Filed Up",visible:true,headerCellTemplate:t.get("nggrid/headerCellTemplateDate.html"),cellFilter:"date:'MM/dd/yyyy'"},{field:"NickName",width:"100",displayName:"Nick Name",visible:true,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.NickName | trustedHTML'></span></div>"},{field:"CurrentEmployment",width:"160",displayName:"Current Employment",visible:true,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.CurrentEmployment | trustedHTML'></span></div>"},{field:"MobileNo",width:"100",displayName:"Mobile No.",visible:true,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.MobileNo | trustedHTML'></span></div>"},{field:"TelNo",width:"125",displayName:"Home / Tel No.",visible:true,cellTemplate:"<div class='ngCellText' ><span class='control-label' ng-bind-html='row.entity.TelNo | trustedHTML'></span></div>"},{field:"EmailAddress",width:"160",displayName:"Email Address",visible:true,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.EmailAddress | trustedHTML'></span></div>"},{field:"CitizenShip",width:"125",displayName:"Citizenship",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.CitizenShip | trustedHTML'></span></div>"},{field:"CivilStatus",width:"125",displayName:"Civil Status",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.CivilStatus | trustedHTML'></span></div>"},{field:"Designation",width:"150",displayName:"Applied For",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Designation | trustedHTML'></span></div>"},{field:"Gender",width:"80",displayName:"Gender",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.Gender | trustedHTML'></span></div>"},{field:"License",width:"125",displayName:"License",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.License | trustedHTML'></span></div>"},{field:"LicenseType",width:"150",displayName:"License Type",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.LicenseType | trustedHTML'></span></div>"},{field:"DateIssued",width:"125",displayName:"Date Issued",visible:false,headerCellTemplate:t.get("nggrid/headerCellTemplateDate.html"),cellFilter:"date:'MM/dd/yyyy'"},{field:"MobileNo",width:"150",displayName:"Mobile No",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.MobileNo | trustedHTML'></span></div>"},{field:"SalaryDesired",width:"125",displayName:"Salary Desired",visible:true,cellTemplate:"<div class='ngCellText'><span class='control-label'>{{row.entity.SalaryDesired}}</span></div>"},{field:"BirthDate",width:"125",displayName:"Birth Date",visible:false,headerCellTemplate:t.get("nggrid/headerCellTemplateDate.html"),cellFilter:"date:'MM/dd/yyyy'"},{field:"Age",width:"125",displayName:"Age",visible:false},{field:"PermanentAddress",width:"160",displayName:"Permanent Address",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.PermanentAddress | trustedHTML'></span></div>"},{field:"LatestEducationAttainment",width:"160",displayName:"Latest Education Attainment",visible:false,cellTemplate:"<div class='ngCellText'><span class='control-label' ng-bind-html='row.entity.LatestEducationAttainment | trustedHTML'></span></div>"},],totalServerItems:l.totalServerItems[1061],enableSorting:true,sortInfo:n.sortInfo[1061],useExternalSorting:true,enablePaging:true,showFooter:true,pagingOptions:n.pagingOptions[1061],footerTemplate:i,footerRowHeight:40,init:function(q,g){setTimeout(function(){n.gridOptions[1061].$gridServices.DomUtilityService.RebuildGrid(n.gridOptions[1061].$gridScope,n.gridOptions[1061].ngGrid)},500)}},};n.filter={1061:{},};n.clearFilter=function(g){n.filter[g]={};n.Search(g)};n.dropdown_source=l.dropdown_source;n.rdb_source=l.rdb_source;n.Search=function(g){m(g,n.pagingOptions[g].pageSize,n.pagingOptions[g].currentPage,n.sortInfo[g].fields[0],n.sortInfo[g].directions[0],n.filter[g])};function m(u,w,g,r,q,s){f.getPagedData(u,w,g,r,q,s).then(function(x){n.gridData[u]=x.data;n.gridOptions[1061].selectedItems=[];if(!n.$$phase){n.$apply()}})}n.dropdown_source={};n.loadModal=function(){if(n.gridOptions[1061].selectedItems.length==0){j.add("Select a record.","danger",5000)}else{var r=new Array();for(var q=0;q<n.gridOptions[1061].selectedItems.length;q++){r.push(n.gridOptions[1061].selectedItems[q].ID)}var g=h.create("Dialogs/c1043Dialog.html","c1043Dialog",{dropdown_source:n.dropdown_source,ids:r},{size:"lg",keyboard:true,backdrop:true,windowClass:"my-class"})}};n.loadModalAttachments=function(r,q){var g=h.create("Dialogs/c1043DialogAttachments.html","c1043DialogAttachments",{row:r,dropdown_source:n.dropdown_source},{size:"md",keyboard:true,backdrop:true})};n.select=function(g){if(!g.IsCanEndorsed){return}if(g.$selected){g.$selected=false;n.gridOptions[1061].selectedItems.splice(n.gridOptions[1061].selectedItems.indexOf(g),1)}else{g.$selected=true;n.gridOptions[1061].selectedItems.push(g)}};n.TableView=false;n.toggleView=function(){n.TableView=!n.TableView;if(n.TableView){setTimeout(function(){n.gridOptions[1061].$gridScope.firstAdjustmentLeft=false;n.gridOptions[1061].ngGrid.lateBoundColumns=false;n.gridOptions[1061].$gridScope.columns.length=0;n.gridOptions[1061].ngGrid.config.columnDefs=n.gridOptions[1061].columnDefs;n.gridOptions[1061].ngGrid.buildColumns();n.gridOptions[1061].ngGrid.eventProvider.assignEvents();n.gridOptions[1061].$gridServices.DomUtilityService.RebuildGrid(n.gridOptions[1061].$gridScope,n.gridOptions[1061].ngGrid)})}};n.LoadColumns=function(){var g=h.create("Dialogs/LoadColumns.html","c1043LoadColumns",{columns:n.gridOptions[1061].columnDefs,colException:"ID,Name1,Designation,SalaryDesired,LatestPositionEndorsed"},{size:"md",keyboard:true,backdrop:"static"});g.result.then(function(q){n.gridOptions[1061].columnDefs=q;if(n.TableView){n.gridOptions[1061].$gridScope.firstAdjustmentLeft=false;n.gridOptions[1061].ngGrid.lateBoundColumns=false;n.gridOptions[1061].$gridScope.columns.length=0;n.gridOptions[1061].ngGrid.config.columnDefs=q;n.gridOptions[1061].ngGrid.buildColumns();n.gridOptions[1061].ngGrid.eventProvider.assignEvents();n.gridOptions[1061].$gridServices.DomUtilityService.RebuildGrid(n.gridOptions[1061].$gridScope,n.gridOptions[1061].ngGrid)}},function(q){})}};a.register.controller("c1043",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","dialogs","$q",b]);var c=function(k,f,j,h,i,l){k.Data={ID_Designation:null,ID_Employee:null,ID_ManpowerRequest:null};k.dropdown_source=h.dropdown_source;k.cancel=function(){j.dismiss("Canceled")};k.save=function(){f.SaveBatchEndorse(h.ids,k.Data.ID_ManpowerRequest).then(function(g){if(g.message!=""){if(g.cnt<h.ids.length){l.go(l.current.name,{},{reload:true});i.add(g.message,"danger",10000);i.add("Other Applicants Endorsed Successully!","info",10000)}else{i.add(g.message,"danger",5000)}}else{l.go(l.current.name,{},{reload:true});i.add("Applicant(s) endorsed successully!","info",5000)}})};f.RequestDropdownSource("ID_Designation as ID,Designation as Name","vManpowerRequest","ID_FilingStatus=2 AND IsCompleted = 0 GROUP BY ID_Designation,Designation").then(function(g){k.dropdown_source.Designation=g.data});k.ChangeRequestor=function(){k.Data.ID_Employee=null;k.Data.ID_ManpowerRequest=null;k.dropdown_source.MRFNumber={};f.RequestDropdownSource("ID_Employee as ID, Requestor as Name","vManpowerRequest","ID_Designation="+k.Data.ID_Designation+" and ID_FilingStatus=2").then(function(g){k.dropdown_source.Requestor=g.data;k.dropdown_source.MRFNumber.length=0;if(k.dropdown_source.Requestor.length==1){k.Data.ID_Employee=g.data[0].ID;k.ChangeMRFNumber()}})};k.ChangeMRFNumber=function(){f.RequestDropdownSource("ID, MRFNumber as Name","vManpowerRequest","ID_Employee="+k.Data.ID_Employee+" and ID_Designation="+k.Data.ID_Designation+"and ID_FilingStatus=2").then(function(g){k.dropdown_source.MRFNumber=g.data;if(k.dropdown_source.MRFNumber.length==1){k.Data.ID_ManpowerRequest=g.data[0].ID}})}};a.register.controller("c1043Dialog",["$scope","dataService","$modalInstance","data","growlNotifications","$state",c]);var d=function(k,f,j,h,i,l){k.Data={ID_Persona:null,Name:null};k.dropdown_source=h.dropdown_source;k.cancel=function(){j.dismiss("Canceled")};k.files={};k.save=function(){f.UploadAttachments(k.files,k.Data.ID_Persona).then(function(g){if(g.message!=""){i.add(g.message,"danger",5000)}else{l.go(l.current.name,{},{reload:true});i.add("Attachments Uploaded Successully!","info",5000)}})};f.RequestDropdownSource("ID,Name","vPersona","IsHired=0").then(function(g){k.dropdown_source.Persona=g.data});k.replaceTxtBox=function(n){var m=Array();var o=0;for(o=0;o<n.length;o++){m.push(n[0]["name"])}var g=m.join();k.files=n;$("#fileholder").attr("value",g)}};a.register.controller("c1043DialogAttachments",["$scope","dataService","$modalInstance","data","growlNotifications","$state",d]);var e=function(i,h,g){i.columns=g.columns;i.colException=g.colException;var f=i.colException.split(",");i.check=false;i.checkAll=function(){i.check=!i.check;angular.forEach(i.columns,function(j){if(f.indexOf(j.field)==-1){j.visible=i.check}})};i.Cancel=function(){h.dismiss("Canceled")};i.Load=function(){h.close(i.columns)}};a.register.controller("c1043LoadColumns",["$scope","$modalInstance","data",e])});