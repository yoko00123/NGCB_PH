"use strict";define(["app"],function(a){var b=function(l,k,f,q,m,i,o,n,e,h,j){if(k.error!==undefined){i.add(k.error,"danger",5000)}l.Sum=function(p,g){return q.Sum(p,g)};l.Max=function(p,g){return q.Max(p,g)};l.Min=function(p,g){return q.Min(p,g)};l.Ave=function(p,g){return q.Ave(p,g)};l.mID=5009;l.rID=m.params.ID_5009;l.goPrevious=function(){m.go("5008",{},{reload:true,inherit:false,notify:true})};l.Session=n.data;l.Master=k.Master;l.Master.IsFirstLog=l.Session.isFirstLog;l.Parent=k.Parent;l.Detail=k.Detail;l.dropdown_source=k.dropdown_source;l.rdb_source=k.rdb_source;l.autocomplete_source=k.autocomplete_source;l.text_autocomplete_source=k.text_autocomplete_source;l.gridOptions={};l.removeRow=function(g,p){if(p.entity.ID==0){l.Detail[g].splice(p.rowIndex,1)}else{f.GridDelete(g,p.entity.ID).then(function(r){l.Detail[g].splice(p.rowIndex,1)})}};l.setID=function(p,r,g){p[r.substring(3)]=g.Name;p[r]=g.ID};l.getAutoCompleteItems=function(p,g,r){return f.getAutoCompleteItems(p,g,r).then(function(s){return s.items})};l.tabs=[];l.tabs.activeTab=(localStorage.getItem("mID")==l.mID?(localStorage.getItem("tab")==undefined?0:localStorage.getItem("tab")):0);localStorage.removeItem("mID");localStorage.removeItem("tab");l.loadedTab=[];l.loadTab=function(g){if(l.loadedTab.indexOf(g)==-1){f.loadTab(g,l.rID).then(function(p){l.Detail[g]=p.data;l.loadedTab.push(g)})}};l.selectedFiles=[];l.onFileSelect=function(g,s,t,r){for(var p=0;p<l.selectedFiles.length;p++){if(l.selectedFiles[p].mID==s&&l.selectedFiles[p].name==t&&l.selectedFiles[p].idx==r){l.selectedFiles.splice(p,1);break}}l.selectedFiles.push({file:g[0],mID:s,name:t,idx:r})};l.loadPasswordDialog=function(){var g=h.create("Dialogs/c5009Dialog.html","c5009Dialog",{id:l.rID,isFirstLog:l.Master.IsFirstLog,id_session:l.Session.ID_User,p:j,Di:h},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"})};l.loadSecurityQuestionDialog=function(){l.SecretQuestion={};f.getSecurityQuestion().then(function(p){l.SecretQuestion=p.data;var g=h.create("Dialogs/c5009SQDialog.html","c5009SQDialog",{id:l.rID,SecretQuestion:l.SecretQuestion,p:j,Di:h},{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"})})};l.CascadingDropdown=function(r,g,s,p){f.CascadingDropdown(r,g,s).then(function(v){var t=p.split(",");for(var u=0;u<t.length;u++){l.dropdown_source[t[u]]=v.data[t[u]]}})};l.notifyExpiredPassword=function(){var g=h.notify("Password","Password is expired, please change your password.",{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(p){},function(){})};if(l.Session.isPasswordExpired){l.notifyExpiredPassword()}e.check(l)};a.register.controller("c5009",["$scope","resources","dataService","utilService","$state","growlNotifications","$templateCache","Session","ckFormPristine","dialogs","parameters",b]);var c=function(k,e,j,f,i,h){k.Title="Password";k.Data={ID:f.id,ID_Session:f.id_session,Password:null,NewPassword:null,ConfirmPassword:null,IsFirstLog:f.isFirstLog,OldPassword:null};k.cancel=function(){j.dismiss("Canceled")};k.savedPassword=function(){var g=h.notify("Password","Successfully changed password.",{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(l){window.location="LogOut.aspx"},function(){})};k.save=function(){if(k.Data.NewPassword.length!=0&&k.Data.ConfirmPassword.length!=0){if(k.Data.NewPassword==k.Data.ConfirmPassword){if(parseInt(k.Data.NewPassword.length)>=parseInt(f.p.PassWordSize)){if(k.Data.NewPassword.match(/^[0-9a-zA-Z]+$/)){e.SavePassword(k.Data).then(function(g){if(g.message.length>0){i.add(g.message,"danger",5000)}else{k.cancel();k.savedPassword()}})}else{i.add("Please use an alphanumeric characters only.","danger",5000)}}else{i.add("Password minimum required character length is ("+f.p.PassWordSize+").","danger",5000)}}else{i.add("New password and confirm password did not match.","danger",5000)}}else{i.add("Please provide a new password.","",5000)}}};a.register.controller("c5009Dialog",["$scope","dataService","$modalInstance","data","growlNotifications","dialogs",c]);var d=function(k,e,j,f,i,h){k.general={};k.general.mainform={};setTimeout(function(){k.general.mainform.$submitted=1},100);k.Title="Security Question";k.SecretQuestion=f.SecretQuestion;k.Data={ID:f.id,ID_SecretQuestion:null,SecretAnswer:null,NewID_SecretQuestion:null,NewSecretAnswer:null};k.cancel=function(){j.dismiss("Canceled")};k.saveSQ=function(){var g=h.notify("Password","Successfully changed security question.",{size:"md",keyboard:true,backdrop:true,windowClass:"my-class"});g.result.then(function(l){window.location.reload()},function(){})};k.save=function(){if(k.general.mainform.$valid){e.SaveSQ(k.Data).then(function(g){if(g.message.length>0){i.add(g.message,"danger",5000)}else{k.cancel();k.saveSQ()}})}}};a.register.controller("c5009SQDialog",["$scope","dataService","$modalInstance","data","growlNotifications","dialogs",d])});