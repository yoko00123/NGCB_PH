!function(e,t){"use strict"
var n=-1!=navigator.appVersion.indexOf("Mac"),i=void 0!==e.onwheel?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",o=document.documentElement,r=o.matches?"matches":o.matchesSelector?"matchesSelector":o.webkitMatches?"webkitMatches":o.webkitMatchesSelector?"webkitMatchesSelector":o.msMatches?"msMatches":o.msMatchesSelector?"msMatchesSelector":o.mozMatches?"mozMatches":o.mozMatchesSelector?"mozMatchesSelector":null,a=t.element.prototype.closest||function(e){for(var n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode
return n&&n[r](e)?t.element(n):t.element()}
t.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(o){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(e){this.$scrollParent=e.$scrollParent,this.$fillElement=e.$fillElement}],compile:function(r){var l=r.children().eq(0),s=l.attr("ng-repeat"),c=l[0].outerHTML,d=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(s),u=d[1],p=d[2],g=d[3],f="$vs_collection",h={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"}
return r.empty(),e.getComputedStyle&&"absolute"===e.getComputedStyle(r[0]).position||r.css("position","absolute"),{pre:function(r,l,s,d){function m(){I&&r.$$postDigest(function(){if(l[0].offsetHeight||l[0].offsetWidth)for(var e=l.children(),t=0;t<e.length;){if(null!=e[t].attributes["ng-repeat"]){e[t][A]&&(r.elementSize=e[t][A],w(),I=!1,r.$root&&!r.$root.$$phase&&r.$apply())
break}t++}else var n=r.$watch(function(){(l[0].offsetHeight||l[0].offsetWidth)&&(n(),m())})})}function v(e){var t=e.currentTarget;(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&S.css("display","block")}function b(){void 0!==s.vsAutoresize&&(I=!0,m(),r.$root&&!r.$root.$$phase&&r.$apply()),x()&&r.$apply()}function w(){N=void 0,z=void 0,x(),y(E?r.sizesCumulative[C]:r.elementSize*C),r.$emit("vsRepeatReinitialized")}function y(e){if(P){if(T.css({width:r.offsetBefore+e+r.offsetAfter+"px",height:"100%"}),d&&d.$fillElement){var t=d.$fillElement[0].parentNode.querySelector("[ng-repeat]")
t&&d.$fillElement.css({width:t.scrollWidth+"px"})}}else T.css({height:r.offsetBefore+e+r.offsetAfter+"px",width:"100%"}),d&&d.$fillElement&&(t=d.$fillElement[0].parentNode.querySelector("[ng-repeat]"),t&&d.$fillElement.css({height:t.scrollHeight+"px"}))}function $(){var e=M[0][L]
e!==B&&(w(),r.$root&&!r.$root.$$phase&&r.$apply()),B=e}function x(){if(E){for(r.startIndex=0;r.sizesCumulative[r.startIndex]<M[0][H]-r.offsetBefore;)r.startIndex++
for(r.startIndex>0&&r.startIndex--,r.endIndex=r.startIndex;r.sizesCumulative[r.endIndex]<M[0][H]-r.offsetBefore+M[0][L];)r.endIndex++}else r.startIndex=Math.max(Math.floor((M[0][H]-r.offsetBefore)/r.elementSize+r.excess/2)-r.excess,0),r.endIndex=Math.min(r.startIndex+Math.ceil(M[0][L]/r.elementSize)+r.excess,C)
var e=r.startIndex!==N||r.endIndex!==z
return e&&(r[f]=D.slice(r.startIndex,r.endIndex)),N=r.startIndex,z=r.endIndex,e}var C,S,T,k=t.element(c),D=[],P=void 0!==s.vsHorizontal,I=!s.vsRepeat,E=!!s.vsSizeProperty,M=s.vsScrollParent?a.call(l,s.vsScrollParent):l,O=P?"translateX":"translateY",R=P?"left":"top",L=P?"clientWidth":"clientHeight",A=P?"offsetWidth":"offsetHeight",H=P?"scrollLeft":"scrollTop"
if(0===M.length)throw"Specified scroll parent selector did not match any element"
r.$scrollParent=M,E&&(r.sizesCumulative=[]),r.elementSize=M[0][L]||50,r.offsetBefore=0,r.offsetAfter=0,r.excess=2,Object.keys(h).forEach(function(e){s[e]&&s.$observe(e,function(t){r[h[e]]=+t,w()})}),r.$watchCollection(p,function(e){if(D=e||[],!D||D.length<1)return r[f]=[],C=0,y(0),void(r.sizesCumulative=[0])
if(C=D.length,E){r.sizes=D.map(function(e){return e[s.vsSizeProperty]})
var t=0
r.sizesCumulative=r.sizes.map(function(e){var n=t
return t+=e,n}),r.sizesCumulative.push(t)}m(),w()}),k.attr("ng-repeat",u+" in "+f+(g?" "+g:"")).addClass("vs-repeat-repeated-element")
var F=E?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"
void 0!==document.documentElement.style.transform?k.attr("ng-style",'{ "transform": "'+O+'(" + '+F+' + "px)"}'):void 0!==document.documentElement.style.webkitTransform?k.attr("ng-style",'{ "-webkit-transform": "'+O+'(" + '+F+' + "px)"}'):k.attr("ng-style","{"+R+": "+F+' + "px"}'),k.attr("style","width:100%"),o(k)(r),l.append(k),T=t.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),l.append(T),o(T)(r),r.$fillElement=T
var G={}
n&&(S=t.element('<div class="vs-repeat-wheel-helper"></div>').on(i,function(e){e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e=e.originalEvent),M[0].scrollLeft+=e.deltaX||-e.wheelDeltaX,M[0].scrollTop+=e.deltaY||-e.wheelDeltaY}).on("mousemove",function(e){(G.x!==e.clientX||G.y!==e.clientY)&&t.element(this).css("display","none"),G={x:e.clientX,y:e.clientY}}).css("display","none"),T.append(S)),r.startIndex=0,r.endIndex=0,M.on("scroll",function(){x()&&r.$apply()}),n&&M.on(i,v),t.element(e).on("resize",b),r.$on("$destroy",function(){t.element(e).off("resize",b)}),r.$on("vsRepeatTrigger",w),r.$on("vsRepeatResize",function(){I=!0,m()})
var N,z,B
r.$watch(function(){"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame($):$()})}}}}}]),t.element(document.head).append("<style>.vs-repeat-wheel-helper{position: absolute;top: 0;bottom: 0;left: 0;right: 0;z-index: 99999;background: rgba(0, 0, 0, 0);}.vs-repeat-repeated-element{position: absolute;z-index: 1;}</style>")}(window,window.angular)
